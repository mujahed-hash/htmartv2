"use strict";(self.webpackChunkhmfront=self.webpackChunkhmfront||[]).push([[8018],{8018:(E,g,c)=>{c.r(g),c.d(g,{ReqSupModule:()=>w});var d=c(177),a=c(7062),u=c(1413),p=c(6977),e=c(7705),m=c(8281);const h=function(n){return["/supplier/sup-requested/",n]};function f(n,r){if(1&n&&(e.j41(0,"button",6),e.EFF(1,"View.."),e.k0s()),2&n){const t=e.XpG().$implicit;e.Y8G("routerLink",e.eq3(1,h,t.customIdentifier))}}function _(n,r){if(1&n&&(e.j41(0,"div",2)(1,"div",3)(2,"p"),e.EFF(3),e.k0s()(),e.j41(4,"div",4),e.DNE(5,f,2,3,"button",5),e.k0s()()),2&n){const t=r.$implicit,i=e.XpG();e.R7$(3),e.SpI("",i.truncateText(t.reqDetails,15),".."),e.R7$(2),e.Y8G("ngIf",t.reqDetails.length>1)}}let v=(()=>{class n{constructor(t){this.requirementService=t,this.destroy$=new u.B}ngOnInit(){this.token=localStorage.getItem("token"),this.loadForwardedRequirements()}loadForwardedRequirements(){this.requirementService.getForwardedRequirementsToSupplier(this.token).pipe((0,p.Q)(this.destroy$)).subscribe(t=>{this.requirements=t,console.log(t)})}truncateText(t,i){return t.length>i?t.substring(0,i)+"...":t}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(m.z))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-req-sup"]],decls:2,vars:1,consts:[[1,"requests"],["class","request",4,"ngFor","ngForOf"],[1,"request"],[1,"r-s-t"],[1,"r-s-btn"],["class","v-b",3,"routerLink",4,"ngIf"],[1,"v-b",3,"routerLink"]],template:function(i,o){1&i&&(e.j41(0,"div",0),e.DNE(1,_,6,2,"div",1),e.k0s()),2&i&&(e.R7$(1),e.Y8G("ngForOf",o.requirements))},dependencies:[d.Sq,d.bT,a.Wk],styles:[".requests[_ngcontent-%COMP%]{width:85%;gap:2px}.request[_ngcontent-%COMP%]{width:15%;display:inline-block;margin:1rem;border:1px solid #161D6F;border-radius:20px}.requests[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{position:relative;left:1rem}.r-s-btn[_ngcontent-%COMP%]{width:100%;text-align:center}.request[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border-radius:8px;padding:8px 0;width:90%;border:none;margin-bottom:.4rem}.f-d[_ngcontent-%COMP%]{background-color:#bde8ca;color:#0d7c66;font-weight:700}.f-s[_ngcontent-%COMP%]{background-color:#e9efec;color:#16325b;font-weight:700}.f-s[_ngcontent-%COMP%]:hover{background-color:#16325b;color:#e9efec;font-weight:700}@media screen and (orientation: portrait){.requests[_ngcontent-%COMP%]{width:100%}.request[_ngcontent-%COMP%]{width:40%}}"]})}}return n})();var s=c(9417);function F(n,r){if(1&n&&(e.j41(0,"div",20)(1,"h4"),e.EFF(2,"Image Preview:"),e.k0s(),e.nrm(3,"img",21),e.k0s()),2&n){const t=e.XpG(3);e.R7$(3),e.Y8G("src",t.imagePreview,e.B4B)}}function q(n,r){if(1&n){const t=e.RV6();e.j41(0,"div",2)(1,"div",8)(2,"h3",9),e.EFF(3,"Post Product Information"),e.k0s(),e.j41(4,"form",10),e.bIt("ngSubmit",function(){e.eBV(t);const o=e.XpG(2);return e.Njj(o.postProductInfo())}),e.j41(5,"div",11)(6,"label",12),e.EFF(7,"Product Details:"),e.k0s(),e.j41(8,"textarea",13),e.bIt("ngModelChange",function(o){e.eBV(t);const l=e.XpG(2);return e.Njj(l.name=o)}),e.EFF(9,"            "),e.k0s()(),e.j41(10,"div",11)(11,"label",14),e.EFF(12,"Price:"),e.k0s(),e.j41(13,"input",15),e.bIt("ngModelChange",function(o){e.eBV(t);const l=e.XpG(2);return e.Njj(l.price=o)}),e.k0s()(),e.DNE(14,F,4,1,"div",16),e.j41(15,"div",11)(16,"label",17),e.EFF(17,"Product Image:"),e.k0s(),e.j41(18,"input",18),e.bIt("change",function(o){e.eBV(t);const l=e.XpG(2);return e.Njj(l.onFileChange(o))}),e.k0s()(),e.j41(19,"div",9)(20,"button",19),e.EFF(21,"Submit Product Info"),e.k0s()()()()()}if(2&n){const t=e.XpG(2);e.R7$(8),e.Y8G("ngModel",t.name),e.R7$(5),e.Y8G("ngModel",t.price),e.R7$(1),e.Y8G("ngIf",t.imagePreview),e.R7$(6),e.Y8G("disabled",!t.isFormValid())}}function P(n,r){if(1&n&&(e.j41(0,"div",22)(1,"div",8)(2,"h3",4),e.EFF(3,"Posted Product Information"),e.k0s(),e.j41(4,"p")(5,"strong"),e.EFF(6,"Name:"),e.k0s(),e.EFF(7),e.k0s(),e.j41(8,"p")(9,"strong"),e.EFF(10,"Price:"),e.k0s(),e.EFF(11),e.k0s(),e.j41(12,"p")(13,"strong"),e.EFF(14,"Status:"),e.k0s(),e.EFF(15),e.k0s(),e.j41(16,"div",23),e.nrm(17,"img",24),e.k0s()()()),2&n){const t=e.XpG(2);e.R7$(7),e.SpI(" ",t.SubmittedProd.name,""),e.R7$(4),e.SpI(" ",t.SubmittedProd.price,""),e.R7$(4),e.SpI(" ",t.SubmittedProd.status,""),e.R7$(2),e.Y8G("src",t.SubmittedProd.image,e.B4B)}}function R(n,r){if(1&n&&(e.j41(0,"div",1)(1,"div",2)(2,"div",3)(3,"h2",4),e.EFF(4,"Requirement Details"),e.k0s(),e.j41(5,"p"),e.EFF(6,"Details: "),e.k0s(),e.j41(7,"p",5),e.EFF(8),e.k0s()()(),e.DNE(9,q,22,4,"div",6),e.DNE(10,P,18,4,"div",7),e.k0s()),2&n){const t=e.XpG();e.R7$(8),e.JRh(t.requirement.reqDetails),e.R7$(1),e.Y8G("ngIf",1!=t.requirement.hasPosted),e.R7$(1),e.Y8G("ngIf",t.requirement.hasPosted)}}function S(n,r){1&n&&(e.j41(0,"div",5),e.EFF(1,"Loading completed products..."),e.k0s())}function b(n,r){if(1&n&&(e.j41(0,"div",6),e.EFF(1),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.JRh(t.error)}}function I(n,r){1&n&&(e.j41(0,"p"),e.EFF(1," status: "),e.j41(2,"strong"),e.EFF(3,"Delivery Requested "),e.k0s()())}function x(n,r){1&n&&(e.j41(0,"p"),e.EFF(1," status: "),e.j41(2,"strong"),e.EFF(3,"Delivered "),e.k0s()())}function k(n,r){if(1&n&&(e.j41(0,"li",8)(1,"h3"),e.EFF(2),e.nI1(3,"currency"),e.k0s(),e.j41(4,"p")(5,"strong"),e.EFF(6,"Requirement:"),e.k0s(),e.EFF(7),e.k0s(),e.DNE(8,I,4,0,"p",4),e.DNE(9,x,4,0,"p",4),e.nrm(10,"img",9),e.k0s()),2&n){const t=r.$implicit;e.R7$(2),e.Lme("",t.name," - ",e.i5U(3,7,t.price,"INR"),""),e.R7$(5),e.SpI(" ",t.requirement.reqDetails,""),e.R7$(1),e.Y8G("ngIf","Completed"===t.status),e.R7$(1),e.Y8G("ngIf","Delivered"===t.status),e.R7$(1),e.FS9("alt",t.name),e.Y8G("src",t.image,e.B4B)}}function j(n,r){if(1&n&&(e.j41(0,"ul"),e.DNE(1,k,11,10,"li",7),e.k0s()),2&n){const t=e.XpG();e.R7$(1),e.Y8G("ngForOf",t.completedProducts)}}const y=[{path:"sup-requirements",component:v},{path:"sup-requested/:customIdentifier",component:(()=>{class n{constructor(t,i){this.route=t,this.requirementService=i,this.name="",this.price=0,this.selectedFile=null,this.hasPosted=!1,this.imagePreview=null,this.destroy$=new u.B}ngOnInit(){this.token=localStorage.getItem("token"),this.customIdentifier=this.route.snapshot.params.customIdentifier,this.getReq()}getReq(){this.customIdentifier=this.route.snapshot.params.customIdentifier,console.log(this.customIdentifier),this.customIdentifier&&this.requirementService.getRequirementByCustomIdentifier(this.customIdentifier,this.token).pipe((0,p.Q)(this.destroy$)).subscribe(t=>{this.requirement=t,console.log(t),this.SubmittedProd=t.productSubmission})}onFileChange(t){if(this.selectedFile=t.target.files[0],this.selectedFile){const i=new FileReader;i.onload=()=>{this.imagePreview=i.result},i.readAsDataURL(this.selectedFile)}}isFormValid(){return!!this.name&&!!this.price&&!!this.selectedFile}postProductInfo(){this.selectedFile?this.requirementService.postProductInfo(this.requirement._id,this.name,this.price,this.selectedFile,this.token).pipe((0,p.Q)(this.destroy$)).subscribe(t=>{console.log(t.message),this.getReq(),this.hasPosted=!0}):console.log("No file selected.")}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(a.nX),e.rXU(m.z))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-post-sup-req"]],decls:1,vars:1,consts:[["class","container my-4",4,"ngIf"],[1,"container","my-4"],[1,"row"],[1,"col-12"],[1,"text-center"],[2,"max-width","85%"],["class","row",4,"ngIf"],["class","row mt-4",4,"ngIf"],[1,"col-12","col-md-8","offset-md-2"],[1,"text-center","mt-4"],[3,"ngSubmit"],[1,"form-group"],["for","name"],["id","name","name","name","required","",1,"form-control",3,"ngModel","ngModelChange"],["for","price"],["id","price","type","number","name","price","required","",1,"form-control",3,"ngModel","ngModelChange"],["class","my-3 text-center",4,"ngIf"],["for","image"],["id","image","type","file","accept",".png, .jpg, .jpeg","required","",1,"form-control",3,"change"],["type","submit",1,"btn","btn-primary",3,"disabled"],[1,"my-3","text-center"],["alt","Image Preview",1,"img-fluid",2,"max-width","100px","height","auto",3,"src"],[1,"row","mt-4"],[1,"text-center","my-3"],["alt","Product Image",1,"img-fluid",2,"max-width","100px","height","auto",3,"src"]],template:function(i,o){1&i&&e.DNE(0,R,11,3,"div",0),2&i&&e.Y8G("ngIf",o.requirement)},dependencies:[d.bT,s.qT,s.me,s.Q0,s.BC,s.cb,s.YS,s.vS,s.cV],styles:[".container[_ngcontent-%COMP%]{width:60%}.product-form[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.form-control[_ngcontent-%COMP%]{padding:.5rem;border:1px solid #ccc;border-radius:.25rem;width:100%}.img-preview[_ngcontent-%COMP%], .img-product[_ngcontent-%COMP%]{width:100%;max-width:200px;height:auto}@media (max-width: 768px){.img-preview[_ngcontent-%COMP%], .img-product[_ngcontent-%COMP%]{max-width:100%}}"]})}}return n})()},{path:"sup-deliveries",component:(()=>{class n{constructor(t){this.productService=t,this.completedProducts=[],this.loading=!0,this.error=null,this.destroy$=new u.B}ngOnInit(){this.token=localStorage.getItem("token"),this.productService.getCompletedProductsForSupplier(this.token).pipe((0,p.Q)(this.destroy$)).subscribe({next:t=>{this.completedProducts=t,this.loading=!1,console.log(t)},error:t=>{this.error=t.message||"Failed to load completed products",this.loading=!1}})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(i){return new(i||n)(e.rXU(m.z))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-sup-req-del"]],decls:7,vars:3,consts:[[1,"component-container"],[1,"delivery"],["class","loading",4,"ngIf"],["class","error",4,"ngIf"],[4,"ngIf"],[1,"loading"],[1,"error"],["class","del-prod",4,"ngFor","ngForOf"],[1,"del-prod"],[1,"product-image",3,"src","alt"]],template:function(i,o){1&i&&(e.j41(0,"div",0)(1,"div",1)(2,"h2"),e.EFF(3,"Products Deliveries"),e.k0s(),e.DNE(4,S,2,0,"div",2),e.DNE(5,b,2,1,"div",3),e.DNE(6,j,2,1,"ul",4),e.k0s()()),2&i&&(e.R7$(4),e.Y8G("ngIf",o.loading),e.R7$(1),e.Y8G("ngIf",o.error),e.R7$(1),e.Y8G("ngIf",!o.loading&&!o.error))},dependencies:[d.Sq,d.bT,d.oe],styles:[".component-container[_ngcontent-%COMP%], .delivery[_ngcontent-%COMP%]{width:100%}.del-prod[_ngcontent-%COMP%]{width:20%;height:18rem;display:inline-block;box-shadow:#63636333 0 2px 8px;padding:20px;margin:0 5px 5px}.del-prod[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:5rem;width:8rem;border-radius:7px;object-fit:cover}@media screen and (orientation: portrait){.del-prod[_ngcontent-%COMP%]{width:50%;position:relative;left:-1.3rem;padding:0 7px;margin:0}}"]})}}return n})()}];let $=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[a.iI.forChild(y),a.iI]})}}return n})(),w=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[d.MD,$,s.YN,s.X1]})}}return n})()}}]);