"use strict";(self.webpackChunkhmfront=self.webpackChunkhmfront||[]).push([[644],{644:(w,x,c)=>{c.r(x),c.d(x,{AdminModule:()=>Z});var d=c(177),f=c(8498),e=c(7705),b=c(1413),u=c(6977),y=c(3976),r=c(9417);function a(n,h){if(1&n){const t=e.RV6();e.j41(0,"span",19),e.bIt("click",function(){const p=e.eBV(t).$implicit,g=e.XpG();return e.Njj(g.selectModel(p))}),e.EFF(1),e.k0s()}if(2&n){const t=h.$implicit,s=e.XpG();e.AVh("selected",t===s.selectedModel),e.R7$(1),e.SpI(" ",t," ")}}function i(n,h){if(1&n&&(e.j41(0,"li")(1,"strong"),e.EFF(2),e.k0s(),e.EFF(3),e.k0s()),2&n){const t=h.$implicit;e.R7$(2),e.SpI("",t[0],":"),e.R7$(1),e.SpI(" ",t[1]," ")}}function l(n,h){if(1&n){const t=e.RV6();e.j41(0,"div",25)(1,"ul"),e.DNE(2,i,4,2,"li",21),e.k0s(),e.j41(3,"button",26),e.bIt("click",function(){const p=e.eBV(t).$implicit,g=e.XpG().$implicit,W=e.XpG(2);return e.Njj(W.deleteDocument(g.key,p._id))}),e.EFF(4,"Delete"),e.k0s()()}if(2&n){const t=h.$implicit,s=e.XpG(3);e.R7$(2),e.Y8G("ngForOf",s.objectEntries(t))}}function m(n,h){if(1&n&&(e.j41(0,"div")(1,"h4"),e.EFF(2),e.k0s(),e.DNE(3,l,5,1,"div",24),e.k0s()),2&n){const t=h.$implicit;e.R7$(2),e.SpI("Model: ",t.key,""),e.R7$(1),e.Y8G("ngForOf",t.value)}}function F(n,h){if(1&n){const t=e.RV6();e.j41(0,"div",20)(1,"h3"),e.EFF(2),e.k0s(),e.DNE(3,m,4,2,"div",21),e.nI1(4,"keyvalue"),e.j41(5,"div",22)(6,"button",23),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.previousPage())}),e.EFF(7,"Previous"),e.k0s(),e.j41(8,"button",23),e.bIt("click",function(){e.eBV(t);const o=e.XpG();return e.Njj(o.nextPage())}),e.EFF(9,"Next"),e.k0s()()()}if(2&n){const t=e.XpG();e.R7$(2),e.SpI("Total Results: ",t.totalResults,""),e.R7$(1),e.Y8G("ngForOf",e.bMT(4,4,t.groupedResults)),e.R7$(3),e.Y8G("disabled",!t.canGoPrevious()),e.R7$(2),e.Y8G("disabled",!t.canGoNext())}}function v(n,h){if(1&n&&(e.j41(0,"div")(1,"h2"),e.EFF(2,"Order Received"),e.k0s(),e.j41(3,"div",27)(4,"h1"),e.EFF(5),e.k0s()()()),2&n){const t=e.XpG();e.R7$(5),e.JRh(t.order.totalOrders)}}function k(n,h){if(1&n&&(e.j41(0,"div",28)(1,"div")(2,"h2"),e.EFF(3,"Order Delivered"),e.k0s(),e.j41(4,"div",27)(5,"h1"),e.EFF(6),e.k0s()()()()),2&n){const t=e.XpG();e.R7$(6),e.JRh(t.order.deliveredOrders)}}function I(n,h){if(1&n&&(e.j41(0,"div",29)(1,"div")(2,"h2"),e.EFF(3,"Total Sales.."),e.k0s(),e.j41(4,"div",27)(5,"h1"),e.EFF(6),e.k0s()()()()),2&n){const t=e.XpG();e.R7$(6),e.JRh(t.order.deliveredOrders)}}function S(n,h){if(1&n&&(e.j41(0,"div")(1,"h2"),e.EFF(2,"Total Items"),e.k0s(),e.j41(3,"div",27)(4,"h1"),e.EFF(5),e.k0s()()()),2&n){const t=e.XpG();e.R7$(5),e.JRh(t.products.count)}}function U(n,h){if(1&n&&(e.j41(0,"div")(1,"h2"),e.EFF(2,"Total Users"),e.k0s(),e.j41(3,"div",27)(4,"h1"),e.EFF(5),e.k0s()()()),2&n){const t=e.XpG();e.R7$(5),e.JRh(t.users.totalUsers)}}function D(n,h){if(1&n&&(e.j41(0,"div")(1,"h2"),e.EFF(2,"Total Admins"),e.k0s(),e.j41(3,"div",27)(4,"h1"),e.EFF(5),e.k0s()()()),2&n){const t=e.XpG();e.R7$(5),e.JRh(t.users.admins)}}function A(n,h){if(1&n&&(e.j41(0,"div")(1,"h2"),e.EFF(2,"Total Buyers"),e.k0s(),e.j41(3,"div",27)(4,"h1"),e.EFF(5),e.k0s()()()),2&n){const t=e.XpG();e.R7$(5),e.JRh(t.users.buyers)}}function T(n,h){if(1&n&&(e.j41(0,"div")(1,"h2"),e.EFF(2,"Total Suppliers"),e.k0s(),e.j41(3,"div",27)(4,"h1"),e.EFF(5),e.k0s()()()),2&n){const t=e.XpG();e.R7$(5),e.JRh(t.users.suppliers)}}let B=(()=>{class n{constructor(t){this.adminService=t,this.destroy$=new b.B,this.model="All",this.query="",this.results=[],this.totalResults=0,this.start=0,this.limit=10,this.models=["All","Product","User","Order","Category","ProductSubmission","Requirement"],this.selectedModel="All",this.groupedResults={},this.sPerformed=!1}ngOnInit(){this.token=localStorage.getItem("token"),this.getOrdersCount(),this.getProductsCount(),this.getUsersCount()}onSearch(){this.sPerformed=!0;const t="All"===this.selectedModel?"":this.selectedModel;console.log("Selected Model:",t),console.log("Query:",this.query),this.adminService.search(this.query,t,this.start,this.limit,this.token).pipe((0,u.Q)(this.destroy$)).subscribe(s=>{console.log("search res",s),this.results=s.results,this.totalResults=s.totalResults,this.groupResultsByModel()},s=>{console.error("Search error:",s)})}objectEntries(t){return Object.entries(t)}groupResultsByModel(){this.groupedResults=this.results.reduce((t,s)=>{const o=s.model;return t[o]||(t[o]=[]),t[o].push(s),t},{})}selectModel(t){this.selectedModel=t,this.start=0,this.onSearch()}deleteDocument(t,s){confirm("Are you sure you want to delete this document?")&&this.adminService.deleteDocumentByModelAndId(t,s,this.token).pipe((0,u.Q)(this.destroy$)).subscribe(()=>{alert("Document deleted successfully"),this.onSearch()},o=>{console.error("Error deleting document:",o),alert("Failed to delete the document.")})}clearModel(){this.selectedModel="All",this.start=0,this.onSearch()}nextPage(){this.start+this.limit<this.totalResults&&(this.start+=this.limit,this.onSearch())}previousPage(){this.start>0&&(this.start-=this.limit,this.onSearch())}resetSearch(){this.query="",this.results=[],this.groupedResults={},this.totalResults=0,this.start=0,this.sPerformed=!1}canGoNext(){return this.start+this.limit<this.totalResults}canGoPrevious(){return this.start>0}getOrdersCount(){this.adminService.getOrdersCountAdmin(this.token).pipe((0,u.Q)(this.destroy$)).subscribe(t=>{console.log(t),this.order=t})}getProductsCount(){this.adminService.getProductsCountAdmin(this.token).pipe((0,u.Q)(this.destroy$)).subscribe(t=>{console.log(t),this.products=t})}getUsersCount(){this.adminService.getUsersCountAdmin(this.token).pipe((0,u.Q)(this.destroy$)).subscribe(t=>{console.log(t),this.users=t})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(s){return new(s||n)(e.rXU(y.z))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-dashboard"]],decls:31,vars:13,consts:[[1,"search-all"],[1,"search-container"],[1,"search-sub"],["type","text","placeholder","Enter search query",3,"ngModel","ngModelChange","keyup.enter"],[1,"button-group"],[1,"srch",3,"click"],[1,"rst",3,"click"],[1,"model-tags"],["class","tag",3,"selected","click",4,"ngFor","ngForOf"],[1,"tag","clear",3,"click"],["class","results-container",4,"ngIf"],[1,"dash-main"],[1,"s-dashboard"],["routerLink","/supplier/orders-recieved/pending",1,"s-d-i","s-r"],[4,"ngIf"],["routerLink","/supplier/orders-recieved/delivered","class","s-d-i s-d",4,"ngIf"],["routerLink","/supplier/orders-recieved/delivered","class","s-d-i s-s",4,"ngIf"],["routerLink","/buyer/marketplace",1,"s-d-i","s-i"],["routerLink","/admin/allusers",1,"s-d-i","s-i"],[1,"tag",3,"click"],[1,"results-container"],[4,"ngFor","ngForOf"],[1,"pagination"],[3,"disabled","click"],["class","result-item",4,"ngFor","ngForOf"],[1,"result-item"],[1,"delete-btn",3,"click"],[1,"stat-value"],["routerLink","/supplier/orders-recieved/delivered",1,"s-d-i","s-d"],["routerLink","/supplier/orders-recieved/delivered",1,"s-d-i","s-s"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),e.bIt("ngModelChange",function(g){return o.query=g})("keyup.enter",function(){return o.onSearch()}),e.k0s(),e.nrm(4,"br"),e.j41(5,"div",4)(6,"button",5),e.bIt("click",function(){return o.onSearch()}),e.EFF(7,"Search"),e.k0s(),e.j41(8,"button",6),e.bIt("click",function(){return o.resetSearch()}),e.EFF(9,"Reset Search"),e.k0s()()(),e.j41(10,"div",7),e.DNE(11,a,2,3,"span",8),e.j41(12,"span",9),e.bIt("click",function(){return o.clearModel()}),e.EFF(13," All "),e.k0s()()(),e.DNE(14,F,10,6,"div",10),e.k0s(),e.j41(15,"div",11)(16,"div",12)(17,"div",13),e.DNE(18,v,6,1,"div",14),e.k0s(),e.DNE(19,k,7,1,"div",15),e.DNE(20,I,7,1,"div",16),e.j41(21,"div",17),e.DNE(22,S,6,1,"div",14),e.k0s(),e.j41(23,"div",18),e.DNE(24,U,6,1,"div",14),e.k0s(),e.j41(25,"div",18),e.DNE(26,D,6,1,"div",14),e.k0s(),e.j41(27,"div",18),e.DNE(28,A,6,1,"div",14),e.k0s(),e.j41(29,"div",18),e.DNE(30,T,6,1,"div",14),e.k0s()()()),2&s&&(e.R7$(3),e.Y8G("ngModel",o.query),e.R7$(8),e.Y8G("ngForOf",o.models),e.R7$(1),e.AVh("selected","All"===o.selectedModel),e.R7$(2),e.Y8G("ngIf",o.sPerformed),e.R7$(4),e.Y8G("ngIf",o.order),e.R7$(1),e.Y8G("ngIf",o.order),e.R7$(1),e.Y8G("ngIf",o.order),e.R7$(2),e.Y8G("ngIf",o.products),e.R7$(2),e.Y8G("ngIf",o.users),e.R7$(2),e.Y8G("ngIf",o.users),e.R7$(2),e.Y8G("ngIf",o.users),e.R7$(2),e.Y8G("ngIf",o.users))},dependencies:[d.Sq,d.bT,f.Wk,r.me,r.BC,r.vS,d.lG],styles:['@charset "UTF-8";.search-all[_ngcontent-%COMP%]{width:80%;margin-top:20px;overflow-x:hidden}.search-container[_ngcontent-%COMP%]{display:block;gap:10px;overflow-x:hidden}.search-sub[_ngcontent-%COMP%]{display:flex;margin-bottom:.5rem;align-items:center}.search-sub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60%;padding:8px 5px}.search-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:max-content}.results-container[_ngcontent-%COMP%]{margin-top:20px;overflow-x:hidden}.srch[_ngcontent-%COMP%]{background-color:#000}.rst[_ngcontent-%COMP%]{background-color:#00f}.srch[_ngcontent-%COMP%], .rst[_ngcontent-%COMP%]{color:#fff;border:none;border-radius:8px;padding:5px 9px;margin-left:.2rem}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px}.model-tags[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px}.tag[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f0f0f0;border-radius:5px;cursor:pointer;transition:background-color .3s;width:max-content}.tag.selected[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.tag.clear[_ngcontent-%COMP%]{background-color:#ddd}.tag[_ngcontent-%COMP%]:hover{background-color:#cce5ff}.result-item[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px;margin:10px 0;border-radius:5px;overflow-x:hidden}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.dash-main[_ngcontent-%COMP%], .s-dashboard[_ngcontent-%COMP%]{overflow-x:hidden;width:100%}.dash-main[_ngcontent-%COMP%]{overflow-x:hidden}.s-dashboard[_ngcontent-%COMP%]{width:max-content;display:flex;flex-wrap:wrap;gap:30px;justify-content:space-around;padding:15px;height:100%}.s-d-i[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:10px;box-shadow:0 4px 8px #0000001a;padding:20px;flex:1 1 calc(25% - 20px);display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;min-width:250px;transition:transform .3s ease}.s-d-i[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.s-d-i[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;color:#333}.stat-value[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3em;margin:0;color:#00796b}.s-dashboard[_ngcontent-%COMP%]{width:100%;display:inline-block}.s-d-i[_ngcontent-%COMP%]{width:25%;display:inline-block;margin:15px}@media screen and (orientation: portrait){.search-all[_ngcontent-%COMP%]{width:98%;overflow-x:hidden}.model-tags[_ngcontent-%COMP%]{display:inline-block}.tag[_ngcontent-%COMP%]{display:inline-block;margin:5px}.search-sub[_ngcontent-%COMP%]{display:grid;margin-bottom:.2rem;align-items:center}.search-sub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:85%;padding:8px 5px;margin-bottom:.5rem}.result-item[_ngcontent-%COMP%]{overflow-x:scroll}.s-dashboard[_ngcontent-%COMP%]{height:max-content;margin-bottom:10rem}.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(20% - 10px);margin:10px 5px;width:8.8rem;max-width:8.8rem;min-width:auto;height:12rem;margin-bottom:5rem}}@media screen and (max-width: 500px){.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(20% - 10px);margin:10px 4px;overflow-x:hidden}}@media screen and (orientation: portrait){.results-container[_ngcontent-%COMP%]{margin:0}.dash-main[_ngcontent-%COMP%]{width:95%;display:flex;justify-content:center;overflow-x:hidden;padding-left:1rem;max-width:95%}.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(30% - 10px);margin:10px 4px;min-width:8.5rem;overflow-x:hidden}}@media screen and (max-width: 520px){.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(30% - 10px);margin:10px 4px}}@media screen and (max-width: 420px){.dash-main[_ngcontent-%COMP%]{padding-left:.5rem}.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(20% - 10px);margin:10px 4px;width:8rem;max-width:8rem}}@media screen and (max-width: 390px){.dash-main[_ngcontent-%COMP%]{display:inline-block;padding-left:.1rem}.s-d-i[_ngcontent-%COMP%]{display:inline-block;flex:none;margin:.1rem;width:1.4rem;max-width:1.4rem;font-size:small}}*[_ngcontent-%COMP%]{box-sizing:border-box}@media screen and (max-width: 370px){.dash-main[_ngcontent-%COMP%]{display:inline-block;padding-left:.1rem}.s-d-i[_ngcontent-%COMP%]{display:inline-block;flex:none;margin:.1rem;width:1.1rem;max-width:1.1rem;font-size:small}.s-dashboard[_ngcontent-%COMP%]{gap:30px;justify-content:center;padding:1px;height:100%}.s-d-i[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:10px;box-shadow:0 4px 8px #0000001a;padding:1px;flex:1 1 calc(40% - 20px);display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;min-width:250px;transition:transform .3s ease;margin:1rem;position:relative;left:5%}}']})}}return n})(),P=(()=>{class n{static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-admin"]],decls:1,vars:0,template:function(s,o){1&s&&e.nrm(0,"app-dashboard")},dependencies:[B]})}}return n})(),$=(()=>{class n{constructor(t,s,o,p){this.fb=t,this.userService=s,this.route=o,this.router=p,this.destroy$=new b.B,this.isEditMode=!1}ngOnInit(){this.userForm=this.fb.group({name:["",r.k0.required],email:["",[r.k0.required,r.k0.email]],password:[""],phone:["",r.k0.required],street:[""],apartment:[""],city:["",r.k0.required],zip:[""],country:["",r.k0.required],isAdmin:[!1],isSupplier:[!1],isBuyer:[!0]}),this.token=localStorage.getItem("token"),this.customIdentifer=this.route.snapshot.params.customIdentifer,this.customIdentifer&&(this.isEditMode=!0,this.userService.getUserByCID(this.customIdentifer,this.token).pipe((0,u.Q)(this.destroy$)).subscribe(t=>{console.log(t),this.userForm.patchValue(t)},t=>console.error("Error fetching user details",t))),this.customIdentifer&&this.isEditMode&&(this.userForm.value.password="")}onSubmit(){if(this.userForm.invalid)return void console.log("iclicked-inavlid-form",this.userForm.value);console.log("iclicked-valid-form",this.userForm.value);const t=this.userForm.value;this.isEditMode?this.userService.updateUser(this.customIdentifer,t,this.token).pipe((0,u.Q)(this.destroy$)).subscribe(s=>{console.log("User updated successfully",s),this.router.navigate(["/admin/allusers"])},s=>console.error("Error updating user",s)):this.userService.addUser(t,this.token).pipe((0,u.Q)(this.destroy$)).subscribe(s=>{console.log("User added successfully",s),this.router.navigate(["/admin/allusers"])},s=>console.error("Error adding user",s))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(s){return new(s||n)(e.rXU(r.ok),e.rXU(y.z),e.rXU(f.nX),e.rXU(f.Ix))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-aeuser"]],decls:59,vars:4,consts:[[1,"form"],[1,"user-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["id","name","formControlName","name","type","text","placeholder","Enter name"],["for","email"],["id","email","formControlName","email","type","email","placeholder","Enter email"],["for","password"],["id","password","formControlName","password","type","password","placeholder","Enter password"],["for","phone"],["id","phone","formControlName","phone","type","text","placeholder","Enter phone number"],["for","street"],["id","street","formControlName","street","type","text","placeholder","Enter street"],["for","apartment"],["id","apartment","formControlName","apartment","type","text","placeholder","Enter apartment"],["for","city"],["id","city","formControlName","city","type","text","placeholder","Enter city"],["for","zip"],["id","zip","formControlName","zip","type","text","placeholder","Enter ZIP code"],["for","country"],["id","country","formControlName","country","type","text","placeholder","Enter country"],[1,"form-check-group",2,"position","relative","vertical-align","middle"],["for","isAdmin"],[2,"position","relative"],["id","isAdmin","formControlName","isAdmin","type","checkbox"],["for","isSupplier"],["id","isSupplier","formControlName","isSupplier","type","checkbox"],["for","isBuyer"],["id","isBuyer","formControlName","isBuyer","type","checkbox"],["type","submit",1,"submit-btn",3,"disabled"]],template:function(s,o){1&s&&(e.j41(0,"div")(1,"div",0)(2,"form",1),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(3,"h2"),e.EFF(4),e.k0s(),e.j41(5,"div",2)(6,"label",3),e.EFF(7,"Name"),e.k0s(),e.nrm(8,"input",4),e.k0s(),e.j41(9,"div",2)(10,"label",5),e.EFF(11,"Email"),e.k0s(),e.nrm(12,"input",6),e.k0s(),e.j41(13,"div",2)(14,"label",7),e.EFF(15,"Password"),e.k0s(),e.nrm(16,"input",8),e.k0s(),e.j41(17,"div",2)(18,"label",9),e.EFF(19,"Phone"),e.k0s(),e.nrm(20,"input",10),e.k0s(),e.j41(21,"div",2)(22,"label",11),e.EFF(23,"Street"),e.k0s(),e.nrm(24,"input",12),e.k0s(),e.j41(25,"div",2)(26,"label",13),e.EFF(27,"Apartment"),e.k0s(),e.nrm(28,"input",14),e.k0s(),e.j41(29,"div",2)(30,"label",15),e.EFF(31,"City"),e.k0s(),e.nrm(32,"input",16),e.k0s(),e.j41(33,"div",2)(34,"label",17),e.EFF(35,"ZIP"),e.k0s(),e.nrm(36,"input",18),e.k0s(),e.j41(37,"div",2)(38,"label",19),e.EFF(39,"Country"),e.k0s(),e.nrm(40,"input",20),e.k0s(),e.j41(41,"div",21)(42,"label",22),e.EFF(43,"Admin "),e.j41(44,"span",23),e.EFF(45,"Admin "),e.k0s(),e.nrm(46,"input",24),e.k0s(),e.j41(47,"label",25),e.EFF(48," Supplier "),e.j41(49,"span",23),e.EFF(50," Supplier"),e.k0s(),e.nrm(51,"input",26),e.k0s(),e.j41(52,"label",27),e.EFF(53,"Buyer "),e.j41(54,"span",23),e.EFF(55," Buyer"),e.k0s(),e.nrm(56,"input",28),e.k0s()(),e.j41(57,"button",29),e.EFF(58),e.k0s()()()()),2&s&&(e.R7$(2),e.Y8G("formGroup",o.userForm),e.R7$(2),e.SpI("",o.isEditMode?"Update":"Add"," User"),e.R7$(53),e.Y8G("disabled",o.userForm.invalid),e.R7$(1),e.SpI("",o.isEditMode?"Update":"Add"," User"))},dependencies:[r.qT,r.me,r.Zm,r.BC,r.cb,r.j4,r.JD],styles:[".form[_ngcontent-%COMP%]{width:100%;display:grid;justify-items:center;margin-left:-8rem;margin-top:1rem;height:100%;overflow-x:hidden;margin-bottom:5rem}.user-form[_ngcontent-%COMP%]{width:40%;margin:0;padding:20px;border:1px solid #ddd;border-radius:8px;background-color:#f9f9f9;height:100%;overflow:hidden}.user-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;font-size:24px;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px}.form-check-group[_ngcontent-%COMP%]{margin:20px;color:#000}.form-check-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;font-weight:400;justify-content:space-around;width:50%;color:#000}.submit-btn[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:16px;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}.submit-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}@media (max-width: 600px){.form[_ngcontent-%COMP%]{height:100%;margin-left:0rem;margin-bottom:10rem}.user-form[_ngcontent-%COMP%]{padding:10px;width:90%;height:100%}.submit-btn[_ngcontent-%COMP%]{width:100%;text-align:center}.form-check-group[_ngcontent-%COMP%]{position:relative;left:20%;width:75%;font-size:small}}"]})}}return n})();var E=c(1620),M=c(5458),C=c(5351),_=c(882),R=c(9631);function G(n,h){1&n&&(e.j41(0,"mat-error"),e.EFF(1," Item Type is required. "),e.k0s())}let O=(()=>{class n{constructor(t,s,o,p){this.userService=t,this.fb=s,this.dialogRef=o,this.data=p,this.destroy$=new b.B,this.isEditing=!1,this.imageDisplay=[],this.image=[],this.categoryForm=this.fb.group({itemType:[p.itemType||"",r.k0.required],itemName:[""],image:[p.image||""]}),this.token=localStorage.getItem("token")}ngOnInit(){this.isEditing=!!this.data.id,this.isEditing&&(this.categoryForm.patchValue({itemType:this.data.itemType,itemName:this.data.itemName,image:this.data.image}),this.data.image&&(this.imageDisplay=[this.data.image]))}onFileChange(t){t.target.files&&t.target.files.length&&(this.image=Array.from(t.target.files),this.imageDisplay=[],this.image.forEach(s=>{const o=new FileReader;o.onload=p=>{this.imageDisplay.push(p.target.result)},o.readAsDataURL(s)}),this.categoryForm.patchValue({image:this.image}))}onSubmit(){const t=new FormData;Object.keys(this.categoryForm.controls).forEach(s=>{"image"!==s&&t.append(s,this.categoryForm.get(s)?.value)}),this.image.forEach(s=>{t.append("image",s,s.name)}),this.categoryForm.valid&&(this.isEditing?(this.updateCategory(t),console.log(t)):this.createCategory(t))}updateCategory(t){this.token&&this.data.id&&this.userService.updateCategory(this.data.id,t,this.token).pipe((0,u.Q)(this.destroy$)).subscribe(s=>this.dialogRef.close(!0),s=>console.error("Error updating category",s))}createCategory(t){this.token&&this.userService.postCategory(t,this.token).pipe((0,u.Q)(this.destroy$)).subscribe(()=>this.dialogRef.close(!0),s=>console.error("Error creating category",s))}onCancel(){this.dialogRef.close()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(s){return new(s||n)(e.rXU(y.z),e.rXU(r.ok),e.rXU(C.CP),e.rXU(C.Vh))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-pecategories"]],decls:18,vars:5,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],["appearance","fill"],["matInput","","formControlName","itemType"],[4,"ngIf"],[1,"form-group"],["for","files"],["alt","",1,"img-preview",2,"width","4rem","height","4rem",3,"src"],["id","images","type","file","accept",".png, .jpg, .jpeg",1,"form-control-file",3,"change"],["mat-dialog-actions","",1,"button"],["mat-button","",1,"b1",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"b2"]],template:function(s,o){1&s&&(e.j41(0,"h2",0),e.EFF(1),e.k0s(),e.j41(2,"form",1),e.bIt("ngSubmit",function(){return o.onSubmit()}),e.j41(3,"mat-form-field",2)(4,"mat-label"),e.EFF(5,"Item Type"),e.k0s(),e.nrm(6,"input",3),e.DNE(7,G,2,0,"mat-error",4),e.k0s(),e.j41(8,"div",5)(9,"label",6),e.EFF(10,"Images:"),e.k0s(),e.nrm(11,"img",7),e.j41(12,"input",8),e.bIt("change",function(g){return o.onFileChange(g)}),e.k0s()(),e.j41(13,"div",9)(14,"button",10),e.bIt("click",function(){return o.onCancel()}),e.EFF(15,"Cancel"),e.k0s(),e.j41(16,"button",11),e.EFF(17),e.k0s()()()),2&s&&(e.R7$(1),e.JRh(o.isEditing?"Edit Category":"Add Category"),e.R7$(1),e.Y8G("formGroup",o.categoryForm),e.R7$(5),e.Y8G("ngIf",o.categoryForm.get("itemType").hasError("required")),e.R7$(4),e.FS9("src",o.imageDisplay[0],e.B4B),e.R7$(6),e.SpI(" ",o.isEditing?"Save Changes":"Add Category"," "))},dependencies:[d.bT,r.qT,r.me,r.BC,r.cb,r.j4,r.JD,C.BI,C.E7,_.rl,_.nJ,_.TL,R.fg],styles:[".button[_ngcontent-%COMP%]   .b2[_ngcontent-%COMP%]{color:#fff;background-color:#163172;padding:8px 16px;border:none;border-radius:8px}.button[_ngcontent-%COMP%]   .b1[_ngcontent-%COMP%]{color:red;background-color:#fff;padding:8px 16px;border:none;border-radius:8px}"]})}}return n})();var j=c(9213);function q(n,h){if(1&n){const t=e.RV6();e.j41(0,"div",5)(1,"div",6),e.nrm(2,"img",7),e.j41(3,"span"),e.EFF(4),e.k0s(),e.j41(5,"span")(6,"mat-icon",8),e.bIt("click",function(){const p=e.eBV(t).$implicit,g=e.XpG();return e.Njj(g.openDialog(p))}),e.EFF(7,"edit_note"),e.k0s()(),e.j41(8,"span")(9,"mat-icon",9),e.bIt("click",function(){const p=e.eBV(t).$implicit,g=e.XpG();return e.Njj(g.deleteCategory(p._id,g.token))}),e.EFF(10,"delete"),e.k0s()()()()}if(2&n){const t=h.$implicit;e.R7$(2),e.FS9("src",t.image[0],e.B4B),e.R7$(2),e.JRh(t.itemType)}}function z(n,h){1&n&&(e.j41(0,"span"),e.EFF(1,"..."),e.k0s())}function L(n,h){if(1&n&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&n){const t=e.XpG().$implicit;e.R7$(1),e.JRh(t.note.slice(50))}}function X(n,h){if(1&n&&(e.j41(0,"div",6)(1,"p")(2,"strong"),e.EFF(3,"Full Note:"),e.k0s(),e.EFF(4),e.k0s(),e.j41(5,"p")(6,"strong"),e.EFF(7,"Date:"),e.k0s(),e.EFF(8),e.nI1(9,"date"),e.k0s(),e.j41(10,"p")(11,"strong"),e.EFF(12,"user id:"),e.k0s(),e.EFF(13),e.k0s(),e.j41(14,"p")(15,"strong"),e.EFF(16,"Apartment:"),e.k0s(),e.EFF(17),e.k0s(),e.j41(18,"p")(19,"strong"),e.EFF(20,"City:"),e.k0s(),e.EFF(21),e.k0s(),e.j41(22,"p")(23,"strong"),e.EFF(24,"Country:"),e.k0s(),e.EFF(25),e.k0s(),e.j41(26,"p")(27,"strong"),e.EFF(28,"Street:"),e.k0s(),e.EFF(29),e.k0s(),e.j41(30,"p")(31,"strong"),e.EFF(32,"Zip Code:"),e.k0s(),e.EFF(33),e.k0s()()),2&n){const t=e.XpG().$implicit;e.R7$(4),e.SpI(" ",t.note,""),e.R7$(4),e.SpI(" ",e.i5U(9,8,t.date,"medium"),""),e.R7$(5),e.SpI(" ",t.user._id,""),e.R7$(4),e.SpI(" ",t.user.apartment,""),e.R7$(4),e.SpI(" ",t.user.city,""),e.R7$(4),e.SpI(" ",t.user.country,""),e.R7$(4),e.SpI(" ",t.user.street,""),e.R7$(4),e.SpI(" ",t.user.zip,"")}}function Y(n,h){if(1&n){const t=e.RV6();e.j41(0,"div",2)(1,"h3"),e.EFF(2),e.k0s(),e.j41(3,"p"),e.EFF(4),e.k0s(),e.j41(5,"p"),e.EFF(6),e.k0s(),e.j41(7,"p"),e.EFF(8),e.k0s(),e.j41(9,"p"),e.EFF(10),e.k0s(),e.j41(11,"p"),e.EFF(12),e.nI1(13,"slice"),e.DNE(14,z,2,0,"span",3),e.DNE(15,L,2,1,"span",3),e.k0s(),e.j41(16,"button",4),e.bIt("click",function(){const p=e.eBV(t).index,g=e.XpG();return e.Njj(g.toggleRequestDetails(p))}),e.EFF(17),e.k0s(),e.DNE(18,X,34,11,"div",5),e.nrm(19,"hr"),e.k0s()}if(2&n){const t=h.$implicit,s=h.index,o=e.XpG();e.R7$(2),e.SpI("Request from ",t.user.name,""),e.R7$(2),e.SpI("Email: ",t.user.email,""),e.R7$(2),e.SpI("Phone: ",t.user.phone,""),e.R7$(2),e.SpI("Role: ",t.role,""),e.R7$(2),e.SpI("Status: ",t.status,""),e.R7$(2),e.SpI(" ",e.brH(13,10,t.note,0,50)," "),e.R7$(2),e.Y8G("ngIf",!o.expandedRequests[s]),e.R7$(1),e.Y8G("ngIf",o.expandedRequests[s]),e.R7$(2),e.SpI(" ",o.expandedRequests[s]?"Show Less":"View Full Details"," "),e.R7$(1),e.Y8G("ngIf",o.expandedRequests[s])}}const Q=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"dashboard",component:P},{path:"home",component:P},{path:"adduser",component:$},{path:"secret/signupAz",component:$},{path:"aeuser/:customIdentifer",component:$},{path:"",loadChildren:()=>c.e(1286).then(c.bind(c,1286)).then(n=>n.OrdersModule),canActivate:[E.q,M.K],data:{role:"admin"}},{path:"",loadChildren:()=>c.e(9170).then(c.bind(c,9170)).then(n=>n.UsersModule),canActivate:[E.q,M.K],data:{role:"admin"}},{path:"",loadChildren:()=>c.e(9993).then(c.bind(c,9993)).then(n=>n.ReqAdminModule),canActivate:[E.q,M.K],data:{role:"admin"}},{path:"categories",component:(()=>{class n{constructor(t,s){this.userService=t,this.dialog=s,this.destroy$=new b.B,this.categories=[],this.token=localStorage.getItem("token")}ngOnInit(){this.getCategories()}getCategories(){this.token&&this.userService.getCategories(this.token).pipe((0,u.Q)(this.destroy$)).subscribe(t=>{this.categories=t,console.log(this.categories)},t=>console.error("Error fetching categories",t))}openDialog(t){this.dialog.open(O,{width:"400px",data:t?{itemType:t.itemType,itemName:t.itemName,image:t.image,id:t._id}:{}}).afterClosed().pipe((0,u.Q)(this.destroy$)).subscribe(o=>{o&&this.getCategories()})}deleteCategory(t,s){this.token&&confirm("Are you sure you want to delete this category?")&&this.userService.deleteCategory(t,s).pipe((0,u.Q)(this.destroy$)).subscribe(()=>{alert("Category deleted successfully"),this.getCategories()},o=>console.error("Error deleting category",o))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(s){return new(s||n)(e.rXU(y.z),e.rXU(C.bZ))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-getcategories"]],decls:10,vars:1,consts:[[1,"container"],[1,"button"],["mat-raised-button","","color","primary",3,"click"],[1,"cat"],["class","cat-sub",4,"ngFor","ngForOf"],[1,"cat-sub"],[1,"cat-sub2"],["alt","",2,"width","20px","height","20px","border-radius","100%",3,"src"],[2,"font-size","28px",3,"click"],[2,"color","#D71313",3,"click"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"h2"),e.EFF(2,"Categories"),e.k0s(),e.j41(3,"div",1)(4,"button",2),e.bIt("click",function(){return o.openDialog()}),e.j41(5,"mat-icon"),e.EFF(6,"add"),e.k0s(),e.EFF(7," Add Category"),e.k0s()(),e.j41(8,"div",3),e.DNE(9,q,11,2,"div",4),e.k0s()()),2&s&&(e.R7$(9),e.Y8G("ngForOf",o.categories))},dependencies:[d.Sq,j.An],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100% s}.cat[_ngcontent-%COMP%]{display:inline-block;margin-top:1rem;width:100%}.cat-sub[_ngcontent-%COMP%]{display:flex;width:auto;padding-right:1rem;text-align:center}.cat-sub2[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;width:auto;gap:5px;padding:8px 15px;margin:.5rem 1rem;border-radius:20px;box-shadow:#00000040 0 .0625em .0625em,#00000040 0 .125em .5em,#ffffff1a 0 0 0 1px inset}.cat-sub[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}.button[_ngcontent-%COMP%]{width:80%}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-width:max-content;box-shadow:#0000002e 0 2px 4px;color:#fff;background-color:#163172;padding:8px 16px;border:none;border-radius:8px;display:flex;align-items:center}@media screen and (orientation: portrait){.cat-sub2[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;width:60%;padding:8px 5px;margin:.5rem 1rem;border-radius:20px;box-shadow:#00000040 0 .0625em .0625em,#00000040 0 .125em .5em,#ffffff1a 0 0 0 1px inset}}"]})}}return n})()},{path:"add-category",component:O},{path:"get-category",component:O},{path:"all-reqs-by-users",component:(()=>{class n{constructor(t){this.adminService=t,this.destroy$=new b.B,this.expandedRequests=[]}ngOnInit(){this.token=localStorage.getItem("token"),this.getRequirements()}getRequirements(){this.adminService.getUsersRequirement(this.token).pipe((0,u.Q)(this.destroy$)).subscribe(t=>{this.requests=t,this.expandedRequests=new Array(this.requests.length).fill(!1),console.log(t)})}toggleRequestDetails(t){this.expandedRequests[t]=!this.expandedRequests[t]}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(s){return new(s||n)(e.rXU(y.z))}}static{this.\u0275cmp=e.VBU({type:n,selectors:[["app-usersrequests"]],decls:4,vars:1,consts:[[1,"request-list"],["class","request-item",4,"ngFor","ngForOf"],[1,"request-item"],[4,"ngIf"],[3,"click"],["class","full-details",4,"ngIf"],[1,"full-details"]],template:function(s,o){1&s&&(e.j41(0,"div",0)(1,"h2"),e.EFF(2,"User Requests"),e.k0s(),e.DNE(3,Y,20,14,"div",1),e.k0s()),2&s&&(e.R7$(3),e.Y8G("ngForOf",o.requests))},dependencies:[d.Sq,d.bT,d.P9,d.vh],styles:[".request-list[_ngcontent-%COMP%]{width:70%}.request-item[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;border-radius:8px;margin-bottom:15px}h3[_ngcontent-%COMP%]{margin:0}button[_ngcontent-%COMP%]{padding:5px 10px;margin-top:5px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.full-details[_ngcontent-%COMP%]{margin-top:10px;color:#333}@media screen and (orientation: portrait){.request-list[_ngcontent-%COMP%]{width:90%}}"]})}}return n})()}];let J=(()=>{class n{static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({imports:[f.iI.forChild(Q),f.iI]})}}return n})();var K=c(5619);let Z=(()=>{class n{static{this.\u0275fac=function(s){return new(s||n)}}static{this.\u0275mod=e.$C({type:n})}static{this.\u0275inj=e.G2t({providers:[K.o],imports:[d.MD,J,r.YN,r.X1,j.m_,C.hM,_.RG,R.fS]})}}return n})()},3976:(w,x,c)=>{c.d(x,{z:()=>b});var d=c(1626),f=c(8984),e=c(7705);let b=(()=>{class u{constructor(r){this.http=r,this.baseUrl=f.c.baseUrl}search(r,a,i=0,l=10,m){const F=new d.Lr({Authorization:`Bearer ${m}`}),v=(new d.Nl).set("query",r).set("model",a).set("start",i.toString()).set("limit",l.toString());return this.http.get(`${this.baseUrl}/admin/search`,{headers:F,params:v})}deleteDocumentByModelAndId(r,a,i){const l=new d.Lr({Authorization:`Bearer ${i}`});return this.http.request("delete",`${this.baseUrl}/admin/doc/delete`,{headers:l,body:{model:r,id:a}})}getUsersRequirement(r){const i={headers:new d.Lr({Authorization:`Bearer ${r}`})};return this.http.get(`${this.baseUrl}/see-requests`,i)}getRequestedSubmissions(r){const i={headers:new d.Lr({Authorization:`Bearer ${r}`})};return this.http.get(`${this.baseUrl}/request/requested-submissions`,i)}getCompletedProductsForAdmin(r){const i={headers:new d.Lr({Authorization:`Bearer ${r}`})};return this.http.get(`${this.baseUrl}/request/admin-completed-products`,i)}confirmDelivery(r,a){const l={headers:new d.Lr({Authorization:`Bearer ${a}`})};return this.http.post(`${this.baseUrl}/request/confirm-delivery`,{submissionId:r},l)}updateDelivery(r,a,i){const m={headers:new d.Lr({Authorization:`Bearer ${i}`})};return this.http.post(`${this.baseUrl}/request/delivery-update`,{requirementId:r,submissionId:a},m)}getAllRequirements(r){const i={headers:new d.Lr({Authorization:`Bearer ${r}`})};return this.http.get(`${this.baseUrl}/request/all-requirements`,i)}forwardRequirement(r,a){const l={headers:new d.Lr({Authorization:`Bearer ${a}`})};return this.http.post(`${this.baseUrl}/request/forward-requirement`,{requirementId:r},l)}getProductSubmissions(r){const i={headers:new d.Lr({Authorization:`Bearer ${r}`})};return this.http.get(`${this.baseUrl}/request/all-product-submissions`,i)}forwardProductSubmission(r,a,i){const m={headers:new d.Lr({Authorization:`Bearer ${i}`})};return this.http.post(`${this.baseUrl}/request/forward-product-submission`,{submissionId:r,requirementId:a},m)}getOrdersCountAdmin(r){const i={headers:new d.Lr({Authorization:`Bearer ${r}`})};return this.http.get(`${this.baseUrl}/admin/orderscount`,i)}getProductsCountAdmin(r){const i={headers:new d.Lr({Authorization:`Bearer ${r}`})};return this.http.get(`${this.baseUrl}/admin/productscount`,i)}getUsersCountAdmin(r){const i={headers:new d.Lr({Authorization:`Bearer ${r}`})};return this.http.get(`${this.baseUrl}/admin/users-count`,i)}getProductsAll(r,a,i){const m={headers:new d.Lr({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/admin/allitems?start=${r}&limit=${a}`,m)}getOrdersAll(r,a,i){const m={headers:new d.Lr({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/admin/orders?start=${r}&limit=${a}`,m)}getOrder(r){const i={headers:new d.Lr({Authorization:`Bearer ${r}`})};return this.http.get(`${this.baseUrl}/order/:customIdentifier`,i)}getUsers(r){const i={headers:new d.Lr({Authorization:`Bearer ${r}`})};return this.http.get(`${this.baseUrl}/users/all`,i)}getUserByCID(r,a){const l={headers:new d.Lr({Authorization:`Bearer ${a}`})};return this.http.get(`${this.baseUrl}/user/${r}`,l)}addUser(r,a){const l={headers:new d.Lr({Authorization:`Bearer ${a}`})};return this.http.post(`${this.baseUrl}/user/signup`,r,l)}updateUser(r,a,i){const m={headers:new d.Lr({Authorization:`Bearer ${i}`})};return this.http.put(`${this.baseUrl}/updateuser/${r}`,a,m)}getCategories(r){const i={headers:new d.Lr({Authorization:`Bearer ${r}`})};return this.http.get(`${this.baseUrl}/categories`,i)}getCategory(r,a){const l={headers:new d.Lr({Authorization:`Bearer ${a}`})};return this.http.get(`${this.baseUrl}/${r}`,l)}postCategory(r,a){const l={headers:new d.Lr({Authorization:`Bearer ${a}`})};return this.http.post(`${this.baseUrl}/category`,r,l)}updateCategory(r,a,i){const m={headers:new d.Lr({Authorization:`Bearer ${i}`})};return this.http.put(`${this.baseUrl}/category/${r}`,a,m)}deleteCategory(r,a){const l={headers:new d.Lr({Authorization:`Bearer ${a}`}),body:{id:r}};return this.http.delete(`${this.baseUrl}/category/delete-category`,l)}getCategoryById(r){return this.http.get(`${this.baseUrl}/category/${r}`)}static{this.\u0275fac=function(a){return new(a||u)(e.KVO(d.Qq))}}static{this.\u0275prov=e.jDH({token:u,factory:u.\u0275fac,providedIn:"root"})}}return u})()}}]);