"use strict";(self.webpackChunkhmfront=self.webpackChunkhmfront||[]).push([[239],{5748:(b,m,r)=>{r.d(m,{U:()=>T});var h=r(8645),g=r(9773),t=r(5879),O=r(7019),u=r(6814),e=r(3403),p=r(6223);function _(i,l){1&i&&(t.TgZ(0,"div")(1,"p"),t._uU(2,"Received Orders Appear Here"),t.qZA()())}function C(i,l){if(1&i&&(t.TgZ(0,"div",20)(1,"div")(2,"div",21)(3,"p",22),t._uU(4,"Order for: "),t.TgZ(5,"strong"),t._uU(6),t.qZA()(),t.TgZ(7,"p",23),t._uU(8,"Order Size type: "),t.TgZ(9,"strong"),t._uU(10),t.qZA()(),t.TgZ(11,"p",23),t._uU(12,"Item quantity : "),t.TgZ(13,"strong"),t._uU(14),t.qZA()()()()()),2&i){const n=l.$implicit;t.xp6(6),t.Oqu(n.product.prodName),t.xp6(4),t.Oqu(n.prodSize),t.xp6(4),t.Oqu(n.quantity)}}const M=function(i){return["/s/view-order",i]};function P(i,l){if(1&i){const n=t.EpF();t.TgZ(0,"div",5)(1,"div")(2,"div",6)(3,"div",7)(4,"p"),t._uU(5,"Orderd by "),t.TgZ(6,"strong"),t._uU(7),t.qZA()(),t.TgZ(8,"p",8),t._uU(9," Status: "),t.TgZ(10,"span",9),t._uU(11),t.qZA()()(),t.TgZ(12,"div",10)(13,"p",11)(14,"strong"),t._uU(15),t.ALo(16,"currency"),t.qZA(),t._uU(17," for "),t.TgZ(18,"span"),t._uU(19),t.qZA(),t._uU(20," item "),t.qZA()()(),t.YNc(21,C,15,3,"div",12),t.TgZ(22,"div",13)(23,"select",14),t.NdJ("ngModelChange",function(o){const s=t.CHM(n).$implicit,c=t.oxw(2);return t.KtG(c.newStatus[s._id]=o)}),t.TgZ(24,"option",15),t._uU(25,"Pending"),t.qZA(),t.TgZ(26,"option",16),t._uU(27,"Approved"),t.qZA(),t.TgZ(28,"option",17),t._uU(29,"Delivered"),t.qZA(),t.TgZ(30,"option",18),t._uU(31,"Cancelled"),t.qZA()(),t.TgZ(32,"button",19),t.NdJ("click",function(){const a=t.CHM(n).$implicit,s=t.oxw(2);return t.KtG(s.updateStatus(a._id,a.user._id))}),t._uU(33,"Update Status"),t.qZA()()()()}if(2&i){const n=l.$implicit,d=t.oxw(2);t.xp6(3),t.Q6J("routerLink",t.VKq(10,M,n.customIdentifer)),t.xp6(4),t.Oqu(null==n||null==n.user?null:n.user.name),t.xp6(4),t.hij("",n.status," "),t.xp6(4),t.hij("",t.xi3(16,7,null==n?null:n.totalPrice,"INR")," "),t.xp6(4),t.Oqu(null==n?null:n.orderItems.length),t.xp6(2),t.Q6J("ngForOf",n.orderItems),t.xp6(2),t.Q6J("ngModel",d.newStatus[n._id])}}function Z(i,l){if(1&i){const n=t.EpF();t.TgZ(0,"button",26,27),t.NdJ("click",function(){t.CHM(n);const o=t.oxw(3);return t.KtG(o.getPlacedOrders())}),t._uU(2),t.qZA()}if(2&i){const n=t.oxw(3);t.Q6J("disabled",n.isLoading),t.xp6(2),t.hij(" ",n.orders?"Load More":"No items"," ")}}function f(i,l){if(1&i&&(t.TgZ(0,"div",24),t.YNc(1,Z,3,2,"button",25),t.qZA()),2&i){const n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.hasMoreOrders&&!n.isLoading)}}function x(i,l){if(1&i&&(t.TgZ(0,"div",2),t.YNc(1,P,34,12,"div",3),t.YNc(2,f,2,1,"div",4),t.qZA()),2&i){const n=t.oxw();t.xp6(1),t.Q6J("ngForOf",n.orders),t.xp6(1),t.Q6J("ngIf",0!=n.orders.length)}}let T=(()=>{class i{constructor(n){this.productService=n,this.orders=[],this.start=10,this.limit=10,this.isLoading=!1,this.hasMoreOrders=!0,this.destroy$=new h.x,this.newStatus={}}ngOnInit(){this.token=localStorage.getItem("token"),this.getPlacedOrders()}getPlacedOrders(){this.productService.getPlacedOrders(this.start,this.limit,this.token).pipe((0,g.R)(this.destroy$)).subscribe({next:n=>{console.log("API Response:",n),this.isLoading=!1,n?.orders&&Array.isArray(n.orders)?(this.orders=[...this.orders,...n.orders],this.start+=this.limit,this.initializeStatus(),this.hasMoreOrders=this.start<n.totalOrders):(console.error("Unexpected response structure:",n),this.hasMoreOrders=!1)},error:n=>{console.error("Error fetching orders:",n),this.isLoading=!1}})}initializeStatus(){this.orders?.length>0?this.orders.forEach(n=>{n?.status?this.newStatus[n._id]=n.status:console.warn("Order without status:",n)}):console.warn("No orders to initialize status for.")}updateStatus(n,d){this.productService.updateOrderStatus(n,d,this.newStatus[n],this.token).pipe((0,g.R)(this.destroy$)).subscribe(a=>{console.log("Order status updated successfully",a),this.getPlacedOrders()},a=>{console.error("Error updating order status",a)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(d){return new(d||i)(t.Y36(O.p))};static#e=this.\u0275cmp=t.Xpm({type:i,selectors:[["app-supplier-orders-component"]],decls:2,vars:2,consts:[[4,"ngIf"],["class","order-container",4,"ngIf"],[1,"order-container"],["class","order-card",4,"ngFor","ngForOf"],["class","itm-btn",4,"ngIf"],[1,"order-card"],[1,"order-header"],[1,"order-head",3,"routerLink"],[2,"margin-bottom","0.5rem","overflow","hidden"],[2,"background-color","#D6E4F0","padding","3px 7px","border-radius","5px","color","#2657C1"],[1,"order-head2",2,"position","relative","width","100%","margin","0","padding","0"],[2,"position","relative","width","max-content","float","right"],["class","order-item",4,"ngFor","ngForOf"],[1,"order-status"],[1,"status-select","form-select",3,"ngModel","ngModelChange"],["value","Pending"],["value","Approved"],["value","Delivered"],["value","Cancelled"],[1,"update-button",3,"click"],[1,"order-item"],[1,"item"],[1,"product-name"],[1,"order-details","product-info","product-price"],[1,"itm-btn"],["style","",3,"disabled","click",4,"ngIf"],[3,"disabled","click"],["loadingIndicator",""]],template:function(d,o){1&d&&(t.YNc(0,_,3,0,"div",0),t.YNc(1,x,3,2,"div",1)),2&d&&(t.Q6J("ngIf",!o.orders),t.xp6(1),t.Q6J("ngIf",o.orders))},dependencies:[u.sg,u.O5,e.rH,p.YN,p.Kr,p.EJ,p.JJ,p.On,u.H9],styles:[".order-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem;padding:1rem;width:80%;overflow:scroll}*[_ngcontent-%COMP%]{overflow:auto}.order-card[_ngcontent-%COMP%]{display:flex;flex-direction:column;border:1px solid #ccc;border-radius:8px;padding:.5rem 1rem;background-color:#f9f9f9;height:20rem}.order-item[_ngcontent-%COMP%]{justify-content:space-between;padding:.5rem 0;border-bottom:1px solid #eee}.product-name[_ngcontent-%COMP%], .order-details[_ngcontent-%COMP%], .order-status[_ngcontent-%COMP%]{margin:0}.status-select[_ngcontent-%COMP%]{margin-top:.2rem;padding:.5rem;border:1px solid #ccc;border-radius:4px}.update-button[_ngcontent-%COMP%]{margin-top:.5rem;padding:.5rem 1rem;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer}.update-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.item[_ngcontent-%COMP%]   p[_ngcontent-%COMP%], .order-head[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-bottom:.4rem}.order-head[_ngcontent-%COMP%]{background-color:#ebf4f6;padding:0 8px;border-radius:5px;color:#041562}.order-head2[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:.4rem;margin-bottom:0}@media (min-width: 768px){.order-container[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap}.order-card[_ngcontent-%COMP%]{flex:1 1 calc(50% - 2rem);margin:.5rem}}@media (min-width: 1024px){.order-card[_ngcontent-%COMP%]{flex:1 1 calc(33.333% - 2rem)}}@media screen and (orientation: portrait){.order-container[_ngcontent-%COMP%]{flex-direction:row;flex-wrap:wrap;font-size:small;width:100%;overflow:scroll}.order-head[_ngcontent-%COMP%]{margin:0}.order-card[_ngcontent-%COMP%]{flex:1 1 calc(50% - 1rem);height:17rem;overflow:scroll}.order-status[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-size:small}.update-button[_ngcontent-%COMP%]{margin-top:.5rem;padding:.5rem 1rem;background-color:#007bff;color:#fff;border:none;border-radius:4px;cursor:pointer;font-size:small}}"]})}return i})()},239:(b,m,r)=>{r.r(m),r.d(m,{SupplierModule:()=>d});var h=r(6814),g=r(3403),t=r(5748),O=r(8645),u=r(9773),e=r(5879),p=r(7019);function _(o,a){if(1&o&&(e.TgZ(0,"div")(1,"h2"),e._uU(2,"Order Received"),e.qZA(),e.TgZ(3,"div",6)(4,"h1"),e._uU(5),e.qZA()()()),2&o){const s=e.oxw();e.xp6(5),e.Oqu(s.order.totalOrders)}}function C(o,a){if(1&o&&(e.TgZ(0,"div",7)(1,"div")(2,"h2"),e._uU(3,"Order Delivered"),e.qZA(),e.TgZ(4,"div",6)(5,"h1"),e._uU(6),e.qZA()()()()),2&o){const s=e.oxw();e.xp6(6),e.Oqu(s.order.deliveredOrders)}}function M(o,a){if(1&o&&(e.TgZ(0,"div",8)(1,"div")(2,"h2"),e._uU(3,"Total Sales"),e.qZA(),e.TgZ(4,"div",6)(5,"h1"),e._uU(6),e.qZA()()()()),2&o){const s=e.oxw();e.xp6(6),e.Oqu(s.order.deliveredOrders)}}function P(o,a){if(1&o&&(e.TgZ(0,"div")(1,"h2"),e._uU(2,"Total Items"),e.qZA(),e.TgZ(3,"div",6)(4,"h1"),e._uU(5),e.qZA()()()),2&o){const s=e.oxw();e.xp6(5),e.Oqu(s.products.count)}}let Z=(()=>{class o{constructor(s){this.supplyService=s,this.destroy$=new O.x}ngOnInit(){this.token=localStorage.getItem("token"),this.getOrdersCount(),this.getProductsCount()}getOrdersCount(){this.supplyService.getOrdersCount(this.token).pipe((0,u.R)(this.destroy$)).subscribe(s=>{console.log(s),this.order=s})}getProductsCount(){this.supplyService.getProductsCount(this.token).pipe((0,u.R)(this.destroy$)).subscribe(s=>{console.log(s),this.products=s})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#t=this.\u0275fac=function(c){return new(c||o)(e.Y36(p.p))};static#e=this.\u0275cmp=e.Xpm({type:o,selectors:[["app-supplier"]],decls:7,vars:4,consts:[[1,"s-dashboard"],[1,"s-d-i","s-r"],[4,"ngIf"],["class","s-d-i s-d",4,"ngIf"],["class","s-d-i s-s",4,"ngIf"],[1,"s-d-i","s-i"],[1,"stat-value"],[1,"s-d-i","s-d"],[1,"s-d-i","s-s"]],template:function(c,v){1&c&&(e.TgZ(0,"div",0)(1,"div",1),e.YNc(2,_,6,1,"div",2),e.qZA(),e.YNc(3,C,7,1,"div",3),e.YNc(4,M,7,1,"div",4),e.TgZ(5,"div",5),e.YNc(6,P,6,1,"div",2),e.qZA()()),2&c&&(e.xp6(2),e.Q6J("ngIf",v.order),e.xp6(1),e.Q6J("ngIf",v.order),e.xp6(1),e.Q6J("ngIf",v.order),e.xp6(2),e.Q6J("ngIf",v.products))},dependencies:[h.O5],styles:[".s-dashboard[_ngcontent-%COMP%]{width:100%;display:flex;flex-wrap:wrap;gap:30px;justify-content:space-around;padding:15px}.s-d-i[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:10px;box-shadow:0 4px 8px #0000001a;padding:20px;flex:1 1 calc(25% - 20px);display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;min-width:250px;transition:transform .3s ease}.s-d-i[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.s-d-i[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;color:#333}.stat-value[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3em;margin:0;color:#00796b}.s-dashboard[_ngcontent-%COMP%]{width:100%;display:inline-block}.s-d-i[_ngcontent-%COMP%]{width:25%;display:inline-block;margin:15px}@media screen and (orientation: portrait){.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(30% - 10px);margin:10px 4px;min-width:8.5rem;overflow:hidden}}@media screen and (max-width: 500px){.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(30% - 10px);margin:10px 4px;min-width:9.5rem;overflow:hidden}}@media screen and (max-width: 400px){.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(30% - 10px);margin:10px 4px;min-width:8.5rem;overflow:hidden}}@media screen and (max-width: 400px) and (max-width: 360px){.dash-main[_ngcontent-%COMP%]{display:inline-block;padding-left:.1rem;margin-top:1rem}.s-d-i[_ngcontent-%COMP%]{display:inline-block;flex:none;margin:.1rem;width:1.1rem;max-width:1.1rem;font-size:small}.s-dashboard[_ngcontent-%COMP%]{gap:30px;justify-content:center;padding:1px;height:100%}.s-d-i[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:10px;box-shadow:0 4px 8px #0000001a;padding:1px;flex:1 1 calc(40% - 20px);display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;min-width:250px;transition:transform .3s ease;margin:1rem;position:relative;left:5%}}"]})}return o})();var f=r(1391),x=r(9742);const T=[{path:"",redirectTo:"dashboard",pathMatch:"full"},{path:"dashboard",component:Z},{path:"orders",component:t.U},{path:"",loadChildren:()=>Promise.all([r.e(5754),r.e(4174),r.e(2032),r.e(6611)]).then(r.bind(r,6611)).then(o=>o.MoreModule),canActivate:[f.a,x.p],data:{role:"supplier"}},{path:"",loadChildren:()=>r.e(8208).then(r.bind(r,8208)).then(o=>o.ReqSupModule),canActivate:[f.a,x.p],data:{role:"supplier"}}];let i=(()=>{class o{static#t=this.\u0275fac=function(c){return new(c||o)};static#e=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({imports:[g.Bz.forChild(T),g.Bz]})}return o})();var l=r(4240),n=r(6223);let d=(()=>{class o{static#t=this.\u0275fac=function(c){return new(c||o)};static#e=this.\u0275mod=e.oAB({type:o});static#n=this.\u0275inj=e.cJS({providers:[l.f],imports:[h.ez,i,n.u5]})}return o})()}}]);