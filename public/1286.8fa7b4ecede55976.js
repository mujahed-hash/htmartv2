"use strict";(self.webpackChunkhmfront=self.webpackChunkhmfront||[]).push([[1286],{1286:(w,a,o)=>{o.r(a),o.d(a,{OrdersModule:()=>v});var s=o(177),d=o(8498),m=o(1413),h=o(6977),t=o(7705),g=o(3976);const p=["loadingIndicator"],u=function(n){return["/s/view-order",n]};function f(n,l){if(1&n&&(t.j41(0,"div",5)(1,"div",6),t.nrm(2,"img",7),t.j41(3,"div",8)(4,"p"),t.EFF(5),t.nrm(6,"br"),t.EFF(7),t.nI1(8,"currency"),t.nrm(9,"br"),t.EFF(10),t.nrm(11,"br"),t.EFF(12),t.nrm(13,"br"),t.k0s()()()()),2&n){const e=l.$implicit;t.R7$(1),t.Y8G("routerLink",t.eq3(10,u,e.customIdentifer)),t.R7$(1),t.FS9("alt",null==e.orderItems[0]||null==e.orderItems[0].product?null:e.orderItems[0].product.prodName),t.Y8G("src",null==e.orderItems[0]||null==e.orderItems[0].product?null:e.orderItems[0].product.images[0],t.B4B),t.R7$(3),t.SpI(" Order ID: ",e._id,""),t.R7$(2),t.SpI(" Total Price: ",t.i5U(8,7,e.totalPrice,"INR"),""),t.R7$(3),t.SpI(" Status: ",e.status,""),t.R7$(2),t.SpI(" Placed by: ",(null==e.user?null:e.user.name)||"Unknown","")}}function x(n,l){if(1&n){const e=t.RV6();t.j41(0,"button",11,12),t.bIt("click",function(){t.eBV(e);const r=t.XpG(2);return t.Njj(r.loadOrders())}),t.EFF(2),t.k0s()}if(2&n){const e=t.XpG(2);t.Y8G("disabled",e.isLoading),t.R7$(2),t.SpI(" ",e.orders.length?"Load More":"No more orders"," ")}}function b(n,l){if(1&n&&(t.j41(0,"div",9),t.DNE(1,x,3,2,"button",10),t.k0s()),2&n){const e=t.XpG();t.R7$(1),t.Y8G("ngIf",e.hasMoreOrders&&!e.isLoading)}}const O=[{path:"allorders",component:(()=>{class n{constructor(e,i){this.adminService=e,this.el=i,this.destroy$=new m.B,this.orders=[],this.start=0,this.limit=20,this.isLoading=!1,this.hasMoreOrders=!0}ngOnInit(){this.token=localStorage.getItem("token"),this.loadOrders()}ngAfterViewInit(){this.initIntersectionObserver(),this.checkContentHeight()}loadOrders(){this.isLoading||!this.hasMoreOrders||(this.isLoading=!0,this.adminService.getOrdersAll(this.start,this.limit,this.token).pipe((0,h.Q)(this.destroy$)).subscribe(e=>{this.isLoading=!1,console.log(e),e&&Array.isArray(e.orders)?(this.orders=[...this.orders,...e.orders],this.start+=this.limit,this.checkContentHeight(),this.hasMoreOrders=e.orders.length===this.limit):(console.error("Unexpected response structure:",e),this.checkContentHeight())},e=>{this.isLoading=!1,console.error("Error loading orders:",e)}))}checkContentHeight(){const e=this.el.nativeElement.querySelector(".items");if(e){const r=window.innerHeight;this.hasMoreOrders=e.offsetHeight<r}else console.error('Element with class ".items" not found.'),this.hasMoreOrders=!1}onResize(){this.checkContentHeight()}initIntersectionObserver(){const e=new IntersectionObserver(i=>{i[0].isIntersecting&&this.hasMoreOrders&&!this.isLoading&&this.loadOrders()},{rootMargin:"100px"});this.loadingIndicator&&e.observe(this.loadingIndicator.nativeElement)}getAllOrders(){}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(i){return new(i||n)(t.rXU(g.z),t.rXU(t.aKT))}}static{this.\u0275cmp=t.VBU({type:n,selectors:[["app-allorders"]],viewQuery:function(i,r){if(1&i&&t.GBs(p,5),2&i){let c;t.mGM(c=t.lsd())&&(r.loadingIndicator=c.first)}},hostBindings:function(i,r){1&i&&t.bIt("resize",function(){return r.onResize()},!1,t.tSv)},decls:6,vars:2,consts:[[1,"hh"],[2,"background-color","#EBF4F6","color","#2657C1","width","max-content","padding","4px 8px"],[1,"items"],["class","item",4,"ngFor","ngForOf"],["class","itm-btn",4,"ngIf"],[1,"item"],["routerLinkActive","router-link-active",2,"width","80%","display","flex","margin-bottom","1rem","box-shadow","rgba(50, 50, 93, 0.25) 0px 6px 12px -2px, rgba(0, 0, 0, 0.3) 0px 3px 7px -3px","overflow","hidden","border-radius","5px",3,"routerLink"],[3,"src","alt"],[1,"itemName"],[1,"itm-btn"],["style","",3,"disabled","click",4,"ngIf"],[3,"disabled","click"],["loadingIndicator",""]],template:function(i,r){1&i&&(t.j41(0,"div",0)(1,"p",1),t.EFF(2," Orders placed by customers "),t.k0s(),t.j41(3,"div",2),t.DNE(4,f,14,12,"div",3),t.k0s(),t.DNE(5,b,2,1,"div",4),t.k0s()),2&i&&(t.R7$(4),t.Y8G("ngForOf",r.orders),t.R7$(1),t.Y8G("ngIf",0!=r.orders.length))},dependencies:[s.Sq,s.bT,d.Wk,d.wQ,s.oe],styles:["img[_ngcontent-%COMP%]{width:5rem;height:5rem;max-height:5rem;margin-right:.7rem}.hh[_ngcontent-%COMP%]{height:100%}.items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%}.item[_ngcontent-%COMP%]{width:30%;display:inline-block;margin:0 0%;box-sizing:border-box;padding:8px;border-radius:5px}.itemName[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.itemName[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:8px 0 0;margin-bottom:4PX}img[_ngcontent-%COMP%]{max-width:100%;height:auto}.itm-btn[_ngcontent-%COMP%]{width:100%;text-align:center;margin-bottom:3rem}.itm-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:max-content;padding:5px;position:relative;right:8rem;font-size:large;background-color:#000;color:#fff;border:none;border-radius:5px;box-shadow:#32325d40 0 6px 12px -2px,#0000004d 0 3px 7px -3px}@media (max-width: 1024px){.item[_ngcontent-%COMP%]{width:45%;margin:0 2.5%}}@media (max-width: 768px){.item[_ngcontent-%COMP%]{width:100%;margin:0 0 20px}}@media screen and (orientation: portrait){.items[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;width:100%}.item[_ngcontent-%COMP%]{width:50%;display:inline-block;margin:0 0%;box-sizing:border-box;padding:6px;border-radius:5px;font-size:small}img[_ngcontent-%COMP%]{max-width:80%;height:4rem}.itm-btn[_ngcontent-%COMP%]{width:100%;display:flex;justify-content:center;right:0rem;text-align:center;margin-bottom:3rem}.itm-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:80%;right:0rem}}"]})}}return n})()}];let C=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(O),d.iI]})}}return n})(),v=(()=>{class n{static{this.\u0275fac=function(i){return new(i||n)}}static{this.\u0275mod=t.$C({type:n})}static{this.\u0275inj=t.G2t({imports:[s.MD,C]})}}return n})()}}]);