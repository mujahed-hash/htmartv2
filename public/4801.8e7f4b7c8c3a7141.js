"use strict";(self.webpackChunkhmfront=self.webpackChunkhmfront||[]).push([[4801],{4801:(k,C,c)=>{c.r(C),c.d(C,{AdminModule:()=>K});var d=c(6814),f=c(3403),e=c(5879),_=c(8645),h=c(9773),b=c(2048),i=c(6223);function a(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"span",19),e.NdJ("click",function(){const p=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.selectModel(p))}),e._uU(1),e.qZA()}if(2&n){const t=u.$implicit,o=e.oxw();e.ekj("selected",t===o.selectedModel),e.xp6(1),e.hij(" ",t," ")}}function s(n,u){if(1&n&&(e.TgZ(0,"li")(1,"strong"),e._uU(2),e.qZA(),e._uU(3),e.qZA()),2&n){const t=u.$implicit;e.xp6(2),e.hij("",t[0],":"),e.xp6(1),e.hij(" ",t[1]," ")}}function l(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",25)(1,"ul"),e.YNc(2,s,4,2,"li",21),e.qZA(),e.TgZ(3,"button",26),e.NdJ("click",function(){const p=e.CHM(t).$implicit,m=e.oxw().$implicit,X=e.oxw(2);return e.KtG(X.deleteDocument(m.key,p._id))}),e._uU(4,"Delete"),e.qZA()()}if(2&n){const t=u.$implicit,o=e.oxw(3);e.xp6(2),e.Q6J("ngForOf",o.objectEntries(t))}}function g(n,u){if(1&n&&(e.TgZ(0,"div")(1,"h4"),e._uU(2),e.qZA(),e.YNc(3,l,5,1,"div",24),e.qZA()),2&n){const t=u.$implicit;e.xp6(2),e.hij("Model: ",t.key,""),e.xp6(1),e.Q6J("ngForOf",t.value)}}function Z(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",20)(1,"h3"),e._uU(2),e.qZA(),e.YNc(3,g,4,2,"div",21),e.ALo(4,"keyvalue"),e.TgZ(5,"div",22)(6,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.previousPage())}),e._uU(7,"Previous"),e.qZA(),e.TgZ(8,"button",23),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.nextPage())}),e._uU(9,"Next"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij("Total Results: ",t.totalResults,""),e.xp6(1),e.Q6J("ngForOf",e.lcZ(4,4,t.groupedResults)),e.xp6(3),e.Q6J("disabled",!t.canGoPrevious()),e.xp6(2),e.Q6J("disabled",!t.canGoNext())}}function v(n,u){if(1&n&&(e.TgZ(0,"div")(1,"h2"),e._uU(2,"Order Received"),e.qZA(),e.TgZ(3,"div",27)(4,"h1"),e._uU(5),e.qZA()()()),2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.order.totalOrders)}}function A(n,u){if(1&n&&(e.TgZ(0,"div",28)(1,"div")(2,"h2"),e._uU(3,"Order Delivered"),e.qZA(),e.TgZ(4,"div",27)(5,"h1"),e._uU(6),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(6),e.Oqu(t.order.deliveredOrders)}}function $(n,u){if(1&n&&(e.TgZ(0,"div",29)(1,"div")(2,"h2"),e._uU(3,"Total Sales.."),e.qZA(),e.TgZ(4,"div",27)(5,"h1"),e._uU(6),e.qZA()()()()),2&n){const t=e.oxw();e.xp6(6),e.Oqu(t.order.deliveredOrders)}}function S(n,u){if(1&n&&(e.TgZ(0,"div")(1,"h2"),e._uU(2,"Total Items"),e.qZA(),e.TgZ(3,"div",27)(4,"h1"),e._uU(5),e.qZA()()()),2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.products.count)}}function D(n,u){if(1&n&&(e.TgZ(0,"div")(1,"h2"),e._uU(2,"Total Users"),e.qZA(),e.TgZ(3,"div",27)(4,"h1"),e._uU(5),e.qZA()()()),2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.users.totalUsers)}}function E(n,u){if(1&n&&(e.TgZ(0,"div")(1,"h2"),e._uU(2,"Total Admins"),e.qZA(),e.TgZ(3,"div",27)(4,"h1"),e._uU(5),e.qZA()()()),2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.users.admins)}}function R(n,u){if(1&n&&(e.TgZ(0,"div")(1,"h2"),e._uU(2,"Total Buyers"),e.qZA(),e.TgZ(3,"div",27)(4,"h1"),e._uU(5),e.qZA()()()),2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.users.buyers)}}function I(n,u){if(1&n&&(e.TgZ(0,"div")(1,"h2"),e._uU(2,"Total Suppliers"),e.qZA(),e.TgZ(3,"div",27)(4,"h1"),e._uU(5),e.qZA()()()),2&n){const t=e.oxw();e.xp6(5),e.Oqu(t.users.suppliers)}}let N=(()=>{class n{constructor(t){this.adminService=t,this.destroy$=new _.x,this.model="All",this.query="",this.results=[],this.totalResults=0,this.start=0,this.limit=10,this.models=["All","Product","User","Order","Category","ProductSubmission","Requirement"],this.selectedModel="All",this.groupedResults={},this.sPerformed=!1}ngOnInit(){this.token=localStorage.getItem("token"),this.getOrdersCount(),this.getProductsCount(),this.getUsersCount()}onSearch(){this.sPerformed=!0;const t="All"===this.selectedModel?"":this.selectedModel;console.log("Selected Model:",t),console.log("Query:",this.query),this.adminService.search(this.query,t,this.start,this.limit,this.token).pipe((0,h.R)(this.destroy$)).subscribe(o=>{console.log("search res",o),this.results=o.results,this.totalResults=o.totalResults,this.groupResultsByModel()},o=>{console.error("Search error:",o)})}objectEntries(t){return Object.entries(t)}groupResultsByModel(){this.groupedResults=this.results.reduce((t,o)=>{const r=o.model;return t[r]||(t[r]=[]),t[r].push(o),t},{})}selectModel(t){this.selectedModel=t,this.start=0,this.onSearch()}deleteDocument(t,o){confirm("Are you sure you want to delete this document?")&&this.adminService.deleteDocumentByModelAndId(t,o,this.token).pipe((0,h.R)(this.destroy$)).subscribe(()=>{alert("Document deleted successfully"),this.onSearch()},r=>{console.error("Error deleting document:",r),alert("Failed to delete the document.")})}clearModel(){this.selectedModel="All",this.start=0,this.onSearch()}nextPage(){this.start+this.limit<this.totalResults&&(this.start+=this.limit,this.onSearch())}previousPage(){this.start>0&&(this.start-=this.limit,this.onSearch())}resetSearch(){this.query="",this.results=[],this.groupedResults={},this.totalResults=0,this.start=0,this.sPerformed=!1}canGoNext(){return this.start+this.limit<this.totalResults}canGoPrevious(){return this.start>0}getOrdersCount(){this.adminService.getOrdersCountAdmin(this.token).pipe((0,h.R)(this.destroy$)).subscribe(t=>{console.log(t),this.order=t})}getProductsCount(){this.adminService.getProductsCountAdmin(this.token).pipe((0,h.R)(this.destroy$)).subscribe(t=>{console.log(t),this.products=t})}getUsersCount(){this.adminService.getUsersCountAdmin(this.token).pipe((0,h.R)(this.destroy$)).subscribe(t=>{console.log(t),this.users=t})}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(b.l))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-dashboard"]],decls:31,vars:13,consts:[[1,"search-all"],[1,"search-container"],[1,"search-sub"],["type","text","placeholder","Enter search query",3,"ngModel","ngModelChange","keyup.enter"],[1,"button-group"],[1,"srch",3,"click"],[1,"rst",3,"click"],[1,"model-tags"],["class","tag",3,"selected","click",4,"ngFor","ngForOf"],[1,"tag","clear",3,"click"],["class","results-container",4,"ngIf"],[1,"dash-main"],[1,"s-dashboard"],["routerLink","/supplier/orders-recieved/pending",1,"s-d-i","s-r"],[4,"ngIf"],["routerLink","/supplier/orders-recieved/delivered","class","s-d-i s-d",4,"ngIf"],["routerLink","/supplier/orders-recieved/delivered","class","s-d-i s-s",4,"ngIf"],["routerLink","/buyer/marketplace",1,"s-d-i","s-i"],["routerLink","/admin/allusers",1,"s-d-i","s-i"],[1,"tag",3,"click"],[1,"results-container"],[4,"ngFor","ngForOf"],[1,"pagination"],[3,"disabled","click"],["class","result-item",4,"ngFor","ngForOf"],[1,"result-item"],[1,"delete-btn",3,"click"],[1,"stat-value"],["routerLink","/supplier/orders-recieved/delivered",1,"s-d-i","s-d"],["routerLink","/supplier/orders-recieved/delivered",1,"s-d-i","s-s"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"input",3),e.NdJ("ngModelChange",function(m){return r.query=m})("keyup.enter",function(){return r.onSearch()}),e.qZA(),e._UZ(4,"br"),e.TgZ(5,"div",4)(6,"button",5),e.NdJ("click",function(){return r.onSearch()}),e._uU(7,"Search"),e.qZA(),e.TgZ(8,"button",6),e.NdJ("click",function(){return r.resetSearch()}),e._uU(9,"Reset Search"),e.qZA()()(),e.TgZ(10,"div",7),e.YNc(11,a,2,3,"span",8),e.TgZ(12,"span",9),e.NdJ("click",function(){return r.clearModel()}),e._uU(13," All "),e.qZA()()(),e.YNc(14,Z,10,6,"div",10),e.qZA(),e.TgZ(15,"div",11)(16,"div",12)(17,"div",13),e.YNc(18,v,6,1,"div",14),e.qZA(),e.YNc(19,A,7,1,"div",15),e.YNc(20,$,7,1,"div",16),e.TgZ(21,"div",17),e.YNc(22,S,6,1,"div",14),e.qZA(),e.TgZ(23,"div",18),e.YNc(24,D,6,1,"div",14),e.qZA(),e.TgZ(25,"div",18),e.YNc(26,E,6,1,"div",14),e.qZA(),e.TgZ(27,"div",18),e.YNc(28,R,6,1,"div",14),e.qZA(),e.TgZ(29,"div",18),e.YNc(30,I,6,1,"div",14),e.qZA()()()),2&o&&(e.xp6(3),e.Q6J("ngModel",r.query),e.xp6(8),e.Q6J("ngForOf",r.models),e.xp6(1),e.ekj("selected","All"===r.selectedModel),e.xp6(2),e.Q6J("ngIf",r.sPerformed),e.xp6(4),e.Q6J("ngIf",r.order),e.xp6(1),e.Q6J("ngIf",r.order),e.xp6(1),e.Q6J("ngIf",r.order),e.xp6(2),e.Q6J("ngIf",r.products),e.xp6(2),e.Q6J("ngIf",r.users),e.xp6(2),e.Q6J("ngIf",r.users),e.xp6(2),e.Q6J("ngIf",r.users),e.xp6(2),e.Q6J("ngIf",r.users))},dependencies:[d.sg,d.O5,f.rH,i.Fj,i.JJ,i.On,d.Nd],styles:['@charset "UTF-8";.search-all[_ngcontent-%COMP%]{width:80%;margin-top:20px;overflow-x:hidden}.search-container[_ngcontent-%COMP%]{display:block;gap:10px;overflow-x:hidden}.search-sub[_ngcontent-%COMP%]{display:flex;margin-bottom:.5rem;align-items:center}.search-sub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:60%;padding:8px 5px}.search-sub[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:max-content}.results-container[_ngcontent-%COMP%]{margin-top:20px;overflow-x:hidden}.srch[_ngcontent-%COMP%]{background-color:#000}.rst[_ngcontent-%COMP%]{background-color:#00f}.srch[_ngcontent-%COMP%], .rst[_ngcontent-%COMP%]{color:#fff;border:none;border-radius:8px;padding:5px 9px;margin-left:.2rem}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:10px}.model-tags[_ngcontent-%COMP%]{display:flex;gap:10px;margin-bottom:20px}.tag[_ngcontent-%COMP%]{padding:10px 15px;background-color:#f0f0f0;border-radius:5px;cursor:pointer;transition:background-color .3s;width:max-content}.tag.selected[_ngcontent-%COMP%]{background-color:#007bff;color:#fff}.tag.clear[_ngcontent-%COMP%]{background-color:#ddd}.tag[_ngcontent-%COMP%]:hover{background-color:#cce5ff}.result-item[_ngcontent-%COMP%]{border:1px solid #ddd;padding:10px;margin:10px 0;border-radius:5px;overflow-x:hidden}.pagination-controls[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-top:20px}.dash-main[_ngcontent-%COMP%], .s-dashboard[_ngcontent-%COMP%]{overflow-x:hidden;width:100%}.dash-main[_ngcontent-%COMP%]{overflow-x:hidden}.s-dashboard[_ngcontent-%COMP%]{width:max-content;display:flex;flex-wrap:wrap;gap:30px;justify-content:space-around;padding:15px;height:100%}.s-d-i[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:10px;box-shadow:0 4px 8px #0000001a;padding:20px;flex:1 1 calc(25% - 20px);display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;min-width:250px;transition:transform .3s ease}.s-d-i[_ngcontent-%COMP%]:hover{transform:translateY(-5px)}.s-d-i[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.2em;margin-bottom:10px;color:#333}.stat-value[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:3em;margin:0;color:#00796b}.s-dashboard[_ngcontent-%COMP%]{width:100%;display:inline-block}.s-d-i[_ngcontent-%COMP%]{width:25%;display:inline-block;margin:15px}@media screen and (orientation: portrait){.search-all[_ngcontent-%COMP%]{width:98%;overflow-x:hidden}.model-tags[_ngcontent-%COMP%]{display:inline-block}.tag[_ngcontent-%COMP%]{display:inline-block;margin:5px}.search-sub[_ngcontent-%COMP%]{display:grid;margin-bottom:.2rem;align-items:center}.search-sub[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:85%;padding:8px 5px;margin-bottom:.5rem}.result-item[_ngcontent-%COMP%]{overflow-x:scroll}.s-dashboard[_ngcontent-%COMP%]{height:max-content;margin-bottom:10rem}.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(20% - 10px);margin:10px 5px;width:8.8rem;max-width:8.8rem;min-width:auto;height:12rem;margin-bottom:5rem}}@media screen and (max-width: 500px){.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(20% - 10px);margin:10px 4px;overflow-x:hidden}}@media screen and (orientation: portrait){.results-container[_ngcontent-%COMP%]{margin:0}.dash-main[_ngcontent-%COMP%]{width:95%;display:flex;justify-content:center;overflow-x:hidden;padding-left:1rem;max-width:95%}.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(30% - 10px);margin:10px 4px;min-width:8.5rem;overflow-x:hidden}}@media screen and (max-width: 520px){.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(30% - 10px);margin:10px 4px}}@media screen and (max-width: 420px){.dash-main[_ngcontent-%COMP%]{padding-left:.5rem}.s-d-i[_ngcontent-%COMP%]{flex:1 1 calc(20% - 10px);margin:10px 4px;width:8rem;max-width:8rem}}@media screen and (max-width: 390px){.dash-main[_ngcontent-%COMP%]{display:inline-block;padding-left:.1rem}.s-d-i[_ngcontent-%COMP%]{display:inline-block;flex:none;margin:.1rem;width:1.4rem;max-width:1.4rem;font-size:small}}*[_ngcontent-%COMP%]{box-sizing:border-box}@media screen and (max-width: 370px){.dash-main[_ngcontent-%COMP%]{display:inline-block;padding-left:.1rem}.s-d-i[_ngcontent-%COMP%]{display:inline-block;flex:none;margin:.1rem;width:1.1rem;max-width:1.1rem;font-size:small}.s-dashboard[_ngcontent-%COMP%]{gap:30px;justify-content:center;padding:1px;height:100%}.s-d-i[_ngcontent-%COMP%]{background-color:#f5f5f5;border-radius:10px;box-shadow:0 4px 8px #0000001a;padding:1px;flex:1 1 calc(40% - 20px);display:flex;flex-direction:column;align-items:center;justify-content:center;text-align:center;min-width:250px;transition:transform .3s ease;margin:1rem;position:relative;left:5%}}']})}return n})(),O=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-admin"]],decls:1,vars:0,template:function(o,r){1&o&&e._UZ(0,"app-dashboard")},dependencies:[N]})}return n})(),U=(()=>{class n{constructor(t,o,r,p){this.fb=t,this.userService=o,this.route=r,this.router=p,this.destroy$=new _.x,this.isEditMode=!1}ngOnInit(){this.userForm=this.fb.group({name:["",i.kI.required],email:["",[i.kI.required,i.kI.email]],password:[""],phone:["",i.kI.required],street:[""],apartment:[""],city:["",i.kI.required],zip:[""],country:["",i.kI.required],isAdmin:[!1],isSupplier:[!1],isBuyer:[!0]}),this.token=localStorage.getItem("token"),this.customIdentifer=this.route.snapshot.params.customIdentifer,this.customIdentifer&&(this.isEditMode=!0,this.userService.getUserByCID(this.customIdentifer,this.token).pipe((0,h.R)(this.destroy$)).subscribe(t=>{console.log(t),this.userForm.patchValue(t)},t=>console.error("Error fetching user details",t))),this.customIdentifer&&this.isEditMode&&(this.userForm.value.password="")}onSubmit(){if(this.userForm.invalid)return void console.log("iclicked-inavlid-form",this.userForm.value);console.log("iclicked-valid-form",this.userForm.value);const t=this.userForm.value;this.isEditMode?this.userService.updateUser(this.customIdentifer,t,this.token).pipe((0,h.R)(this.destroy$)).subscribe(o=>{console.log("User updated successfully",o),this.router.navigate(["/admin/allusers"])},o=>console.error("Error updating user",o)):this.userService.addUser(t,this.token).pipe((0,h.R)(this.destroy$)).subscribe(o=>{console.log("User added successfully",o),this.router.navigate(["/admin/allusers"])},o=>console.error("Error adding user",o))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(i.qu),e.Y36(b.l),e.Y36(f.gz),e.Y36(f.F0))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-aeuser"]],decls:59,vars:4,consts:[[1,"form"],[1,"user-form",3,"formGroup","ngSubmit"],[1,"form-group"],["for","name"],["id","name","formControlName","name","type","text","placeholder","Enter name"],["for","email"],["id","email","formControlName","email","type","email","placeholder","Enter email"],["for","password"],["id","password","formControlName","password","type","password","placeholder","Enter password"],["for","phone"],["id","phone","formControlName","phone","type","text","placeholder","Enter phone number"],["for","street"],["id","street","formControlName","street","type","text","placeholder","Enter street"],["for","apartment"],["id","apartment","formControlName","apartment","type","text","placeholder","Enter apartment"],["for","city"],["id","city","formControlName","city","type","text","placeholder","Enter city"],["for","zip"],["id","zip","formControlName","zip","type","text","placeholder","Enter ZIP code"],["for","country"],["id","country","formControlName","country","type","text","placeholder","Enter country"],[1,"form-check-group",2,"position","relative","vertical-align","middle"],["for","isAdmin"],[2,"position","relative"],["id","isAdmin","formControlName","isAdmin","type","checkbox"],["for","isSupplier"],["id","isSupplier","formControlName","isSupplier","type","checkbox"],["for","isBuyer"],["id","isBuyer","formControlName","isBuyer","type","checkbox"],["type","submit",1,"submit-btn",3,"disabled"]],template:function(o,r){1&o&&(e.TgZ(0,"div")(1,"div",0)(2,"form",1),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(3,"h2"),e._uU(4),e.qZA(),e.TgZ(5,"div",2)(6,"label",3),e._uU(7,"Name"),e.qZA(),e._UZ(8,"input",4),e.qZA(),e.TgZ(9,"div",2)(10,"label",5),e._uU(11,"Email"),e.qZA(),e._UZ(12,"input",6),e.qZA(),e.TgZ(13,"div",2)(14,"label",7),e._uU(15,"Password"),e.qZA(),e._UZ(16,"input",8),e.qZA(),e.TgZ(17,"div",2)(18,"label",9),e._uU(19,"Phone"),e.qZA(),e._UZ(20,"input",10),e.qZA(),e.TgZ(21,"div",2)(22,"label",11),e._uU(23,"Street"),e.qZA(),e._UZ(24,"input",12),e.qZA(),e.TgZ(25,"div",2)(26,"label",13),e._uU(27,"Apartment"),e.qZA(),e._UZ(28,"input",14),e.qZA(),e.TgZ(29,"div",2)(30,"label",15),e._uU(31,"City"),e.qZA(),e._UZ(32,"input",16),e.qZA(),e.TgZ(33,"div",2)(34,"label",17),e._uU(35,"ZIP"),e.qZA(),e._UZ(36,"input",18),e.qZA(),e.TgZ(37,"div",2)(38,"label",19),e._uU(39,"Country"),e.qZA(),e._UZ(40,"input",20),e.qZA(),e.TgZ(41,"div",21)(42,"label",22),e._uU(43,"Admin "),e.TgZ(44,"span",23),e._uU(45,"Admin "),e.qZA(),e._UZ(46,"input",24),e.qZA(),e.TgZ(47,"label",25),e._uU(48," Supplier "),e.TgZ(49,"span",23),e._uU(50," Supplier"),e.qZA(),e._UZ(51,"input",26),e.qZA(),e.TgZ(52,"label",27),e._uU(53,"Buyer "),e.TgZ(54,"span",23),e._uU(55," Buyer"),e.qZA(),e._UZ(56,"input",28),e.qZA()(),e.TgZ(57,"button",29),e._uU(58),e.qZA()()()()),2&o&&(e.xp6(2),e.Q6J("formGroup",r.userForm),e.xp6(2),e.hij("",r.isEditMode?"Update":"Add"," User"),e.xp6(53),e.Q6J("disabled",r.userForm.invalid),e.xp6(1),e.hij("",r.isEditMode?"Update":"Add"," User"))},dependencies:[i._Y,i.Fj,i.Wl,i.JJ,i.JL,i.sg,i.u],styles:[".form[_ngcontent-%COMP%]{width:100%;display:grid;justify-items:center;margin-left:-8rem;margin-top:1rem;height:100%;overflow-x:hidden;margin-bottom:5rem}.user-form[_ngcontent-%COMP%]{width:40%;margin:0;padding:20px;border:1px solid #ddd;border-radius:8px;background-color:#f9f9f9;height:100%;overflow:hidden}.user-form[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin-bottom:20px;font-size:24px;color:#333}.form-group[_ngcontent-%COMP%]{margin-bottom:15px}.form-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:block;font-weight:700;margin-bottom:5px}.form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding:10px;border:1px solid #ccc;border-radius:4px}.form-check-group[_ngcontent-%COMP%]{margin:20px;color:#000}.form-check-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;font-weight:400;justify-content:space-around;width:50%;color:#000}.submit-btn[_ngcontent-%COMP%]{display:inline-block;padding:10px 20px;font-size:16px;color:#fff;background-color:#007bff;border:none;border-radius:4px;cursor:pointer}.submit-btn[_ngcontent-%COMP%]:hover{background-color:#0056b3}@media (max-width: 600px){.form[_ngcontent-%COMP%]{height:100%;margin-left:0rem;margin-bottom:10rem}.user-form[_ngcontent-%COMP%]{padding:10px;width:90%;height:100%}.submit-btn[_ngcontent-%COMP%]{width:100%;text-align:center}.form-check-group[_ngcontent-%COMP%]{position:relative;left:20%;width:75%;font-size:small}}"]})}return n})();var M=c(1391),q=c(9742),x=c(7700),y=c(9157),w=c(2032);function F(n,u){1&n&&(e.TgZ(0,"mat-error"),e._uU(1," Item Type is required. "),e.qZA())}let T=(()=>{class n{constructor(t,o,r,p){this.userService=t,this.fb=o,this.dialogRef=r,this.data=p,this.destroy$=new _.x,this.isEditing=!1,this.imageDisplay=[],this.image=[],this.categoryForm=this.fb.group({itemType:[p.itemType||"",i.kI.required],itemName:[""],image:[p.image||""]}),this.token=localStorage.getItem("token")}ngOnInit(){this.isEditing=!!this.data.id,this.isEditing&&(this.categoryForm.patchValue({itemType:this.data.itemType,itemName:this.data.itemName,image:this.data.image}),this.data.image&&(this.imageDisplay=[this.data.image]))}onFileChange(t){t.target.files&&t.target.files.length&&(this.image=Array.from(t.target.files),this.imageDisplay=[],this.image.forEach(o=>{const r=new FileReader;r.onload=p=>{this.imageDisplay.push(p.target.result)},r.readAsDataURL(o)}),this.categoryForm.patchValue({image:this.image}))}onSubmit(){const t=new FormData;Object.keys(this.categoryForm.controls).forEach(o=>{"image"!==o&&t.append(o,this.categoryForm.get(o)?.value)}),this.image.forEach(o=>{t.append("image",o,o.name)}),this.categoryForm.valid&&(this.isEditing?(this.updateCategory(t),console.log(t)):this.createCategory(t))}updateCategory(t){this.token&&this.data.id&&this.userService.updateCategory(this.data.id,t,this.token).pipe((0,h.R)(this.destroy$)).subscribe(o=>this.dialogRef.close(!0),o=>console.error("Error updating category",o))}createCategory(t){this.token&&this.userService.postCategory(t,this.token).pipe((0,h.R)(this.destroy$)).subscribe(()=>this.dialogRef.close(!0),o=>console.error("Error creating category",o))}onCancel(){this.dialogRef.close()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(b.l),e.Y36(i.qu),e.Y36(x.so),e.Y36(x.WI))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-pecategories"]],decls:18,vars:5,consts:[["mat-dialog-title",""],[3,"formGroup","ngSubmit"],["appearance","fill"],["matInput","","formControlName","itemType"],[4,"ngIf"],[1,"form-group"],["for","files"],["alt","",1,"img-preview",2,"width","4rem","height","4rem",3,"src"],["id","images","type","file","accept",".png, .jpg, .jpeg",1,"form-control-file",3,"change"],["mat-dialog-actions","",1,"button"],["mat-button","",1,"b1",3,"click"],["mat-raised-button","","color","primary","type","submit",1,"b2"]],template:function(o,r){1&o&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"form",1),e.NdJ("ngSubmit",function(){return r.onSubmit()}),e.TgZ(3,"mat-form-field",2)(4,"mat-label"),e._uU(5,"Item Type"),e.qZA(),e._UZ(6,"input",3),e.YNc(7,F,2,0,"mat-error",4),e.qZA(),e.TgZ(8,"div",5)(9,"label",6),e._uU(10,"Images:"),e.qZA(),e._UZ(11,"img",7),e.TgZ(12,"input",8),e.NdJ("change",function(m){return r.onFileChange(m)}),e.qZA()(),e.TgZ(13,"div",9)(14,"button",10),e.NdJ("click",function(){return r.onCancel()}),e._uU(15,"Cancel"),e.qZA(),e.TgZ(16,"button",11),e._uU(17),e.qZA()()()),2&o&&(e.xp6(1),e.Oqu(r.isEditing?"Edit Category":"Add Category"),e.xp6(1),e.Q6J("formGroup",r.categoryForm),e.xp6(5),e.Q6J("ngIf",r.categoryForm.get("itemType").hasError("required")),e.xp6(4),e.s9C("src",r.imageDisplay[0],e.LSH),e.xp6(6),e.hij(" ",r.isEditing?"Save Changes":"Add Category"," "))},dependencies:[d.O5,i._Y,i.Fj,i.JJ,i.JL,i.sg,i.u,x.uh,x.H8,y.KE,y.hX,y.TO,w.Nt],styles:[".button[_ngcontent-%COMP%]   .b2[_ngcontent-%COMP%]{color:#fff;background-color:#163172;padding:8px 16px;border:none;border-radius:8px}.button[_ngcontent-%COMP%]   .b1[_ngcontent-%COMP%]{color:red;background-color:#fff;padding:8px 16px;border:none;border-radius:8px}"]})}return n})();var P=c(617);function J(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"div",6),e._UZ(2,"img",7),e.TgZ(3,"span"),e._uU(4),e.qZA(),e.TgZ(5,"span")(6,"mat-icon",8),e.NdJ("click",function(){const p=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.openDialog(p))}),e._uU(7,"edit_note"),e.qZA()(),e.TgZ(8,"span")(9,"mat-icon",9),e.NdJ("click",function(){const p=e.CHM(t).$implicit,m=e.oxw();return e.KtG(m.deleteCategory(p._id))}),e._uU(10,"delete"),e.qZA()()()()}if(2&n){const t=u.$implicit;e.xp6(2),e.s9C("src",t.image[0],e.LSH),e.xp6(2),e.Oqu(t.itemType)}}function B(n,u){1&n&&(e.TgZ(0,"span"),e._uU(1,"..."),e.qZA())}function z(n,u){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.qZA()),2&n){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.note.slice(50))}}function Y(n,u){if(1&n&&(e.TgZ(0,"div",6)(1,"p")(2,"strong"),e._uU(3,"Full Note:"),e.qZA(),e._uU(4),e.qZA(),e.TgZ(5,"p")(6,"strong"),e._uU(7,"Date:"),e.qZA(),e._uU(8),e.ALo(9,"date"),e.qZA(),e.TgZ(10,"p")(11,"strong"),e._uU(12,"user id:"),e.qZA(),e._uU(13),e.qZA(),e.TgZ(14,"p")(15,"strong"),e._uU(16,"Apartment:"),e.qZA(),e._uU(17),e.qZA(),e.TgZ(18,"p")(19,"strong"),e._uU(20,"City:"),e.qZA(),e._uU(21),e.qZA(),e.TgZ(22,"p")(23,"strong"),e._uU(24,"Country:"),e.qZA(),e._uU(25),e.qZA(),e.TgZ(26,"p")(27,"strong"),e._uU(28,"Street:"),e.qZA(),e._uU(29),e.qZA(),e.TgZ(30,"p")(31,"strong"),e._uU(32,"Zip Code:"),e.qZA(),e._uU(33),e.qZA()()),2&n){const t=e.oxw().$implicit;e.xp6(4),e.hij(" ",t.note,""),e.xp6(4),e.hij(" ",e.xi3(9,8,t.date,"medium"),""),e.xp6(5),e.hij(" ",t.user._id,""),e.xp6(4),e.hij(" ",t.user.apartment,""),e.xp6(4),e.hij(" ",t.user.city,""),e.xp6(4),e.hij(" ",t.user.country,""),e.xp6(4),e.hij(" ",t.user.street,""),e.xp6(4),e.hij(" ",t.user.zip,"")}}function W(n,u){if(1&n){const t=e.EpF();e.TgZ(0,"div",2)(1,"h3"),e._uU(2),e.qZA(),e.TgZ(3,"p"),e._uU(4),e.qZA(),e.TgZ(5,"p"),e._uU(6),e.qZA(),e.TgZ(7,"p"),e._uU(8),e.qZA(),e.TgZ(9,"p"),e._uU(10),e.qZA(),e.TgZ(11,"p"),e._uU(12),e.ALo(13,"slice"),e.YNc(14,B,2,0,"span",3),e.YNc(15,z,2,1,"span",3),e.qZA(),e.TgZ(16,"button",4),e.NdJ("click",function(){const p=e.CHM(t).index,m=e.oxw();return e.KtG(m.toggleRequestDetails(p))}),e._uU(17),e.qZA(),e.YNc(18,Y,34,11,"div",5),e._UZ(19,"hr"),e.qZA()}if(2&n){const t=u.$implicit,o=u.index,r=e.oxw();e.xp6(2),e.hij("Request from ",t.user.name,""),e.xp6(2),e.hij("Email: ",t.user.email,""),e.xp6(2),e.hij("Phone: ",t.user.phone,""),e.xp6(2),e.hij("Role: ",t.role,""),e.xp6(2),e.hij("Status: ",t.status,""),e.xp6(2),e.hij(" ",e.Dn7(13,10,t.note,0,50)," "),e.xp6(2),e.Q6J("ngIf",!r.expandedRequests[o]),e.xp6(1),e.Q6J("ngIf",r.expandedRequests[o]),e.xp6(2),e.hij(" ",r.expandedRequests[o]?"Show Less":"View Full Details"," "),e.xp6(1),e.Q6J("ngIf",r.expandedRequests[o])}}const G=[{path:"",redirectTo:"home",pathMatch:"full"},{path:"dashboard",component:O},{path:"home",component:O},{path:"adduser",component:U},{path:"secret/signupAz",component:U},{path:"aeuser/:customIdentifer",component:U},{path:"",loadChildren:()=>c.e(2958).then(c.bind(c,2958)).then(n=>n.OrdersModule),canActivate:[M.a,q.p],data:{role:"admin"}},{path:"",loadChildren:()=>c.e(390).then(c.bind(c,390)).then(n=>n.UsersModule),canActivate:[M.a,q.p],data:{role:"admin"}},{path:"",loadChildren:()=>c.e(1260).then(c.bind(c,1260)).then(n=>n.ReqAdminModule),canActivate:[M.a,q.p],data:{role:"admin"}},{path:"categories",component:(()=>{class n{constructor(t,o){this.userService=t,this.dialog=o,this.destroy$=new _.x,this.categories=[],this.token=localStorage.getItem("token")}ngOnInit(){this.getCategories()}getCategories(){this.token&&this.userService.getCategories(this.token).pipe((0,h.R)(this.destroy$)).subscribe(t=>{this.categories=t,console.log(this.categories)},t=>console.error("Error fetching categories",t))}openDialog(t){this.dialog.open(T,{width:"400px",data:t?{itemType:t.itemType,itemName:t.itemName,image:t.image,id:t._id}:{}}).afterClosed().pipe((0,h.R)(this.destroy$)).subscribe(r=>{r&&this.getCategories()})}deleteCategory(t){this.token&&confirm("Are you sure you want to delete this category?")&&this.userService.deleteCategory({id:t}).pipe((0,h.R)(this.destroy$)).subscribe(()=>{alert("Category deleted successfully"),this.getCategories()},o=>console.error("Error deleting category",o))}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(b.l),e.Y36(x.uw))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-getcategories"]],decls:10,vars:1,consts:[[1,"container"],[1,"button"],["mat-raised-button","","color","primary",3,"click"],[1,"cat"],["class","cat-sub",4,"ngFor","ngForOf"],[1,"cat-sub"],[1,"cat-sub2"],["alt","",2,"width","20px","height","20px","border-radius","100%",3,"src"],[2,"font-size","28px",3,"click"],[2,"color","#D71313",3,"click"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2,"Categories"),e.qZA(),e.TgZ(3,"div",1)(4,"button",2),e.NdJ("click",function(){return r.openDialog()}),e.TgZ(5,"mat-icon"),e._uU(6,"add"),e.qZA(),e._uU(7," Add Category"),e.qZA()(),e.TgZ(8,"div",3),e.YNc(9,J,11,2,"div",4),e.qZA()()),2&o&&(e.xp6(9),e.Q6J("ngForOf",r.categories))},dependencies:[d.sg,P.Hw],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100% s}.cat[_ngcontent-%COMP%]{display:inline-block;margin-top:1rem;width:100%}.cat-sub[_ngcontent-%COMP%]{display:flex;width:auto;padding-right:1rem;text-align:center}.cat-sub2[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;width:auto;gap:5px;padding:8px 15px;margin:.5rem 1rem;border-radius:20px;box-shadow:#00000040 0 .0625em .0625em,#00000040 0 .125em .5em,#ffffff1a 0 0 0 1px inset}.cat-sub[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:inline-block}.button[_ngcontent-%COMP%]{width:80%}.container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{max-width:max-content;box-shadow:#0000002e 0 2px 4px;color:#fff;background-color:#163172;padding:8px 16px;border:none;border-radius:8px;display:flex;align-items:center}@media screen and (orientation: portrait){.cat-sub2[_ngcontent-%COMP%]{display:flex;align-items:center;text-align:center;width:60%;padding:8px 5px;margin:.5rem 1rem;border-radius:20px;box-shadow:#00000040 0 .0625em .0625em,#00000040 0 .125em .5em,#ffffff1a 0 0 0 1px inset}}"]})}return n})()},{path:"add-category",component:T},{path:"get-category",component:T},{path:"all-reqs-by-users",component:(()=>{class n{constructor(t){this.adminService=t,this.destroy$=new _.x,this.expandedRequests=[]}ngOnInit(){this.token=localStorage.getItem("token"),this.getRequirements()}getRequirements(){this.adminService.getUsersRequirement(this.token).pipe((0,h.R)(this.destroy$)).subscribe(t=>{this.requests=t,this.expandedRequests=new Array(this.requests.length).fill(!1),console.log(t)})}toggleRequestDetails(t){this.expandedRequests[t]=!this.expandedRequests[t]}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static#e=this.\u0275fac=function(o){return new(o||n)(e.Y36(b.l))};static#t=this.\u0275cmp=e.Xpm({type:n,selectors:[["app-usersrequests"]],decls:4,vars:1,consts:[[1,"request-list"],["class","request-item",4,"ngFor","ngForOf"],[1,"request-item"],[4,"ngIf"],[3,"click"],["class","full-details",4,"ngIf"],[1,"full-details"]],template:function(o,r){1&o&&(e.TgZ(0,"div",0)(1,"h2"),e._uU(2,"User Requests"),e.qZA(),e.YNc(3,W,20,14,"div",1),e.qZA()),2&o&&(e.xp6(3),e.Q6J("ngForOf",r.requests))},dependencies:[d.sg,d.O5,d.OU,d.uU],styles:[".request-list[_ngcontent-%COMP%]{width:70%}.request-item[_ngcontent-%COMP%]{padding:10px;border:1px solid #ddd;border-radius:8px;margin-bottom:15px}h3[_ngcontent-%COMP%]{margin:0}button[_ngcontent-%COMP%]{padding:5px 10px;margin-top:5px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer}button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.full-details[_ngcontent-%COMP%]{margin-top:10px;color:#333}@media screen and (orientation: portrait){.request-list[_ngcontent-%COMP%]{width:90%}}"]})}return n})()}];let L=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({imports:[f.Bz.forChild(G),f.Bz]})}return n})();var H=c(4240);let K=(()=>{class n{static#e=this.\u0275fac=function(o){return new(o||n)};static#t=this.\u0275mod=e.oAB({type:n});static#n=this.\u0275inj=e.cJS({providers:[H.f],imports:[d.ez,L,i.u5,i.UX,P.Ps,x.Is,y.lN,w.c]})}return n})()},2048:(k,C,c)=>{c.d(C,{l:()=>_});var d=c(9862),f=c(5349),e=c(5879);let _=(()=>{class h{constructor(i){this.http=i,this.baseUrl=f.N.baseUrl}search(i,a,s=0,l=10,g){const Z=new d.WM({Authorization:`Bearer ${g}`}),v=(new d.LE).set("query",i).set("model",a).set("start",s.toString()).set("limit",l.toString());return this.http.get(`${this.baseUrl}/admin/search`,{headers:Z,params:v})}deleteDocumentByModelAndId(i,a,s){const l=new d.WM({Authorization:`Bearer ${s}`});return this.http.request("delete",`${this.baseUrl}/admin/doc/delete`,{headers:l,body:{model:i,id:a}})}getUsersRequirement(i){const s={headers:new d.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/see-requests`,s)}getRequestedSubmissions(i){const s={headers:new d.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/request/requested-submissions`,s)}getCompletedProductsForAdmin(i){const s={headers:new d.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/request/admin-completed-products`,s)}confirmDelivery(i,a){const l={headers:new d.WM({Authorization:`Bearer ${a}`})};return this.http.post(`${this.baseUrl}/request/confirm-delivery`,{submissionId:i},l)}updateDelivery(i,a,s){const g={headers:new d.WM({Authorization:`Bearer ${s}`})};return this.http.post(`${this.baseUrl}/request/delivery-update`,{requirementId:i,submissionId:a},g)}getAllRequirements(i){const s={headers:new d.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/request/all-requirements`,s)}forwardRequirement(i,a){const l={headers:new d.WM({Authorization:`Bearer ${a}`})};return this.http.post(`${this.baseUrl}/request/forward-requirement`,{requirementId:i},l)}getProductSubmissions(i){const s={headers:new d.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/request/all-product-submissions`,s)}forwardProductSubmission(i,a,s){const g={headers:new d.WM({Authorization:`Bearer ${s}`})};return this.http.post(`${this.baseUrl}/request/forward-product-submission`,{submissionId:i,requirementId:a},g)}getOrdersCountAdmin(i){const s={headers:new d.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/admin/orderscount`,s)}getProductsCountAdmin(i){const s={headers:new d.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/admin/productscount`,s)}getUsersCountAdmin(i){const s={headers:new d.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/admin/users-count`,s)}getProductsAll(i,a,s){const g={headers:new d.WM({Authorization:`Bearer ${s}`})};return this.http.get(`${this.baseUrl}/admin/allitems?start=${i}&limit=${a}`,g)}getOrdersAll(i,a,s){const g={headers:new d.WM({Authorization:`Bearer ${s}`})};return this.http.get(`${this.baseUrl}/admin/orders?start=${i}&limit=${a}`,g)}getOrder(i){const s={headers:new d.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/order/:customIdentifier`,s)}getUsers(i){const s={headers:new d.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/users/all`,s)}getUserByCID(i,a){const l={headers:new d.WM({Authorization:`Bearer ${a}`})};return this.http.get(`${this.baseUrl}/user/${i}`,l)}addUser(i,a){const l={headers:new d.WM({Authorization:`Bearer ${a}`})};return this.http.post(`${this.baseUrl}/user/signup`,i,l)}updateUser(i,a,s){const g={headers:new d.WM({Authorization:`Bearer ${s}`})};return this.http.put(`${this.baseUrl}/updateuser/${i}`,a,g)}getCategories(i){const s={headers:new d.WM({Authorization:`Bearer ${i}`})};return this.http.get(`${this.baseUrl}/categories`,s)}getCategory(i,a){const l={headers:new d.WM({Authorization:`Bearer ${a}`})};return this.http.get(`${this.baseUrl}/${i}`,l)}postCategory(i,a){const l={headers:new d.WM({Authorization:`Bearer ${a}`})};return this.http.post(`${this.baseUrl}/category`,i,l)}updateCategory(i,a,s){const g={headers:new d.WM({Authorization:`Bearer ${s}`})};return this.http.put(`${this.baseUrl}/category/${i}`,a,g)}deleteCategory(i){return this.http.post(`${this.baseUrl}/category/delete-category`,i)}getCategoryById(i){return this.http.get(`${this.baseUrl}/category/${i}`)}static#e=this.\u0275fac=function(a){return new(a||h)(e.LFG(d.eN))};static#t=this.\u0275prov=e.Yz7({token:h,factory:h.\u0275fac,providedIn:"root"})}return h})()}}]);