"use strict";(self.webpackChunkhmfront=self.webpackChunkhmfront||[]).push([[2788],{2788:(N,p,r)=>{r.r(p),r.d(p,{ItembycatModule:()=>B});var c=r(177),d=r(8498),b=r(1413),g=r(6977),t=r(7705),y=r(9088),x=r(4598),m=r(9417),l=r(9213),u=r(3318),C=r(1750);const v=["loadingIndicator"];function M(i,a){if(1&i&&(t.j41(0,"div",8),t.EFF(1),t.k0s()),2&i){const n=a.$implicit;t.Y8G("ngClass",n.type),t.R7$(1),t.SpI(" ",n.message," ")}}function w(i,a){1&i&&(t.j41(0,"div",9)(1,"p",10),t.EFF(2,"There are no Items in this category"),t.k0s()())}function k(i,a){if(1&i){const n=t.RV6();t.j41(0,"div",22)(1,"button",23),t.bIt("click",function(){t.eBV(n);const o=t.XpG().$implicit,s=t.XpG();return t.Njj(s.addProductToCart(o._id))}),t.j41(2,"mat-icon",24),t.EFF(3,"add_shopping_cart"),t.k0s(),t.EFF(4," Add to cart "),t.k0s()()}}function I(i,a){1&i&&(t.j41(0,"div",22)(1,"button",25)(2,"mat-icon",24),t.EFF(3,"add_shopping_cart"),t.k0s(),t.EFF(4," Go to cart "),t.k0s()())}const f=function(i){return["/buyer/item/view",i]};function P(i,a){if(1&i){const n=t.RV6();t.j41(0,"div",11)(1,"div",12)(2,"div",13),t.nrm(3,"img",14),t.k0s(),t.j41(4,"div",15)(5,"p",16),t.EFF(6),t.k0s(),t.j41(7,"button",17)(8,"mat-icon",18),t.EFF(9,"visibility"),t.k0s(),t.EFF(10," View"),t.k0s(),t.j41(11,"p"),t.EFF(12),t.nI1(13,"currency"),t.k0s(),t.j41(14,"div",19)(15,"p-inputNumber",20),t.bIt("ngModelChange",function(o){const h=t.eBV(n).$implicit,R=t.XpG();return t.Njj(R.quantities[h._id]=o)}),t.k0s()(),t.DNE(16,k,5,0,"div",21),t.DNE(17,I,5,0,"div",21),t.k0s()()()}if(2&i){const n=a.$implicit,e=t.XpG();t.R7$(3),t.FS9("alt",n.prodName),t.Y8G("routerLink",t.eq3(16,f,n.customIdentifer))("src",n.images[0],t.B4B),t.R7$(3),t.JRh(n.prodName),t.R7$(1),t.Y8G("routerLink",t.eq3(18,f,n.customIdentifer)),t.R7$(5),t.Lme("",t.i5U(13,13,n.prodPrice,"INR"),"/",n.prodSize,""),t.R7$(3),t.Y8G("ngModel",e.quantities[n._id])("showButtons",!0)("min",1)("max",n.countInStock),t.R7$(1),t.Y8G("ngIf",!n.inCart),t.R7$(1),t.Y8G("ngIf",n.inCart)}}function O(i,a){if(1&i){const n=t.RV6();t.j41(0,"button",26,27),t.bIt("click",function(){t.eBV(n);const o=t.XpG();return t.Njj(o.loadProducts())}),t.EFF(2," Load More "),t.k0s()}if(2&i){const n=t.XpG();t.Y8G("disabled",n.isLoading)}}const _=[{path:"item/:customIdentifer",component:(()=>{class i{constructor(n,e,o,s,h){this.location=n,this.BuyerService=e,this.actRoute=o,this.el=s,this.notificationService=h,this.destroy$=new b.B,this.products=[],this.start=0,this.limit=10,this.isLoading=!1,this.hasMoreProducts=!0,this.quantities={},this.notifications=[]}ngOnInit(){this.actRoute.params.subscribe(n=>{this.catId=n.customIdentifer}),this.loadProducts(),this.token=localStorage.getItem("token"),console.log(this.quantity),this.notificationService.notifications$.pipe((0,g.Q)(this.destroy$)).pipe((0,g.Q)(this.destroy$)).subscribe(n=>{this.notifications=n}),this.products.forEach(n=>{this.quantities[n.id]=this.quantities[n.id]||1})}ngAfterViewInit(){this.initIntersectionObserver(),this.checkContentHeight()}loadProducts(){this.isLoading||!this.hasMoreProducts||(this.isLoading=!0,this.token=localStorage.getItem("token"),console.log("toke",this.token),this.BuyerService.getProductsByCategory(this.token,this.catId,this.start,this.limit).pipe((0,g.Q)(this.destroy$)).subscribe(n=>{console.log(n),this.isLoading=!1,n&&Array.isArray(n.products)?(this.products=[...this.products,...n.products],this.products.forEach(e=>{this.quantities[e._id]||(this.quantities[e._id]=1)}),this.start+=this.limit,this.checkContentHeight(),this.hasMoreProducts=n.products.length===this.limit):(console.error("Unexpected response structure:",n),this.checkContentHeight())},n=>{this.isLoading=!1,console.error("Error loading products:",n)}))}checkContentHeight(){const n=this.el.nativeElement.querySelector(".items-").offsetHeight,e=window.innerHeight;this.hasMoreProducts=n>e}onResize(){this.checkContentHeight()}initIntersectionObserver(){const n=new IntersectionObserver(e=>{e[0].isIntersecting&&this.hasMoreProducts&&!this.isLoading&&this.loadProducts()},{rootMargin:"100px"});this.loadingIndicator&&n.observe(this.loadingIndicator.nativeElement)}addProductToCart(n){const e=this.quantities[n]||1;console.log(),this.BuyerService.addToCart(n,e,this.token).pipe((0,g.Q)(this.destroy$)).subscribe(o=>{this.loadProducts(),this.notificationService.addNotification("Item added to cart!","success"),console.log(o)},o=>{console.error("Error adding product to cart:",o)})}goBack(){this.location.back()}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static{this.\u0275fac=function(e){return new(e||i)(t.rXU(c.aZ),t.rXU(y.f),t.rXU(d.nX),t.rXU(t.aKT),t.rXU(x.J))}}static{this.\u0275cmp=t.VBU({type:i,selectors:[["app-itembycategory"]],viewQuery:function(e,o){if(1&e&&t.GBs(v,5),2&e){let s;t.mGM(s=t.lsd())&&(o.loadingIndicator=s.first)}},hostBindings:function(e,o){1&e&&t.bIt("resize",function(){return o.onResize()},!1,t.tSv)},decls:10,vars:4,consts:[[2,"width","80%","position","fixed","z-index","5"],["style","position: relative; ","class","notification",3,"ngClass",4,"ngFor","ngForOf"],["class","checkout-all","style","",4,"ngIf"],[1,"hh"],[1,"items-"],["class","item",4,"ngFor","ngForOf"],[1,"itm-btn"],["style","",3,"disabled","click",4,"ngIf"],[1,"notification",2,"position","relative",3,"ngClass"],[1,"checkout-all"],[2,"background-color","white","padding","4px 8px","border","#c8c9d4 1.5px solid","color","#0D1282","width","max-content","border-radius","9px"],[1,"item"],["routerLinkActive","router-link-active",1,"sub-item"],[1,"img"],[3,"routerLink","src","alt"],[1,"itemName"],[2,"font-weight","bold"],[2,"width","max-content","display","flex","justify-content","center","vertical-align","middle","align-items","center","border","none","border-radius","5px","background-color","#37B7C3","color","white","padding","2px 8px",3,"routerLink"],[2,"color","white","font-size","15px","position","relative","top","0.35rem"],[1,"count"],["name","quantity","inputId","minmax","mode","decimal",3,"ngModel","showButtons","min","max","ngModelChange"],["style"," width:max-content; display: flex; align-items: center; margin-top: 0.5rem;",4,"ngIf"],[2,"width","max-content","display","flex","align-items","center","margin-top","0.5rem"],[2,"width","100%","display","flex","align-items","center","justify-content","center","border","none","border-radius","5px","background-color","#071952","color","white","padding","3px 8px","box-shadow","6px 6px 12px #c5c5c5,\n  -6px -6px 12px #ffffff",3,"click"],[2,"color","#F0DE36"],["routerLink","/buyer/cart",2,"width","100%","display","flex","align-items","center","justify-content","center","border","none","border-radius","5px","background-color","#071952","color","white","padding","3px 8px"],[3,"disabled","click"],["loadingIndicator",""]],template:function(e,o){1&e&&(t.j41(0,"div",0),t.DNE(1,M,2,2,"div",1),t.k0s(),t.DNE(2,w,3,0,"div",2),t.j41(3,"div"),t.nrm(4,"app-buyer-search"),t.k0s(),t.j41(5,"div",3)(6,"div",4),t.DNE(7,P,18,20,"div",5),t.k0s(),t.j41(8,"div",6),t.DNE(9,O,3,1,"button",7),t.k0s()()),2&e&&(t.R7$(1),t.Y8G("ngForOf",o.notifications),t.R7$(1),t.Y8G("ngIf",o.products.length<1),t.R7$(5),t.Y8G("ngForOf",o.products),t.R7$(2),t.Y8G("ngIf",o.hasMoreProducts&&!o.isLoading))},dependencies:[c.YU,c.Sq,c.bT,d.Wk,d.wQ,m.BC,m.vS,l.An,u.YI,C.J,c.oe],styles:[".hh[_ngcontent-%COMP%]{width:100%;justify-items:flex-start;-ms-overflow-style:none;scrollbar-width:none;overflow-x:hidden;height:max-content;margin-bottom:5rem}.hh[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}.items-[_ngcontent-%COMP%]{width:90%;height:auto;margin:0rem}.item[_ngcontent-%COMP%]{width:28%;display:inline-block;flex-wrap:wrap;align-items:center;margin:.5rem;border-radius:8px;background:none;box-shadow:#0000001a 0 4px 12px}p-toast[_ngcontent-%COMP%]{width:20%}.img[_ngcontent-%COMP%]{margin-top:.5rem}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:8rem;height:7rem;margin-right:1rem;border-radius:8px;object-fit:cover}.sub-item[_ngcontent-%COMP%]{width:93%;flex:1 1 93%;display:flex;align-items:normal;vertical-align:middle;margin:.4rem .5rem;padding-left:1rem;padding-bottom:1rem;padding-top:.4rem;border-radius:8px}.itemName[_ngcontent-%COMP%]{margin-top:-.5rem}.notification[_ngcontent-%COMP%]{padding:15px;margin:10px;border-radius:5px;font-size:16px;color:#fff;opacity:.9;transition:opacity .5s ease-out}.success[_ngcontent-%COMP%]{background-color:#4caf50}.error[_ngcontent-%COMP%]{background-color:#f44336}.info[_ngcontent-%COMP%]{background-color:#2196f3}.count[_ngcontent-%COMP%]{width:85%}.itm-btn[_ngcontent-%COMP%]{width:100%;display:grid;justify-items:center;text-align:center;margin:0;position:relative;left:-5.8%;margin-bottom:2.4rem;margin-top:.8rem}.itm-btn[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:max-content;background-color:#2196f3;color:#fff;font-weight:700;border:none;border-radius:7px;padding:6px 9px;margin:0;text-align:center;box-shadow:6px 6px 12px #c5c5c5,-6px -6px 12px #fff}@media screen and (max-width: 1200px){.item[_ngcontent-%COMP%]{width:50%;display:inline-block;flex-wrap:wrap;align-items:center;margin:0rem;border-radius:8px}.items-[_ngcontent-%COMP%]{width:100%}}@media screen and (max-width: 700px){.item[_ngcontent-%COMP%]{width:50;box-shadow:none}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:6rem;height:7rem;margin-right:2rem;border-radius:8px}.sub-item[_ngcontent-%COMP%]{padding:1rem}}@media screen and (orientation: portrait){.hh[_ngcontent-%COMP%]{height:max-content;margin-bottom:0;padding-bottom:1rem}.img[_ngcontent-%COMP%]{padding-right:1rem}.img[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:7.7rem;height:7rem;margin-right:2.4rem;border-radius:8px}.items-[_ngcontent-%COMP%]{margin-top:1rem;width:100%;height:max-content}.count[_ngcontent-%COMP%]{width:75%}.itm-btn[_ngcontent-%COMP%]{left:0}.item[_ngcontent-%COMP%]{width:100%;flex-wrap:nowrap;display:block}.sub-item[_ngcontent-%COMP%]{width:90%;padding-top:1rem;padding-bottom:1rem;box-shadow:#3c40434d 0 1px 2px,#3c404326 0 1px 3px 1px}}.sub-item[_ngcontent-%COMP%], .item[_ngcontent-%COMP%], .items-[_ngcontent-%COMP%], .hh[_ngcontent-%COMP%]{-ms-overflow-style:none;scrollbar-width:none;overflow-x:hidden}.hh[_ngcontent-%COMP%]::-webkit-scrollbar, .sub-item[_ngcontent-%COMP%]::-webkit-scrollbar, .item[_ngcontent-%COMP%]::-webkit-scrollbar, .items-[_ngcontent-%COMP%]::-webkit-scrollbar{display:none}"]})}}return i})()}];let F=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[d.iI.forChild(_),d.iI]})}}return i})();var j=r(7023),$=r(1141);let E=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[c.MD,m.YN,m.X1,d.iI,l.m_]})}}return i})();var G=r(6242);let B=(()=>{class i{static{this.\u0275fac=function(e){return new(e||i)}}static{this.\u0275mod=t.$C({type:i})}static{this.\u0275inj=t.G2t({imports:[c.MD,F,m.YN,l.m_,j.MB,$.tm,u.O3,E,G.BuyeritemsModule]})}}return i})()}}]);